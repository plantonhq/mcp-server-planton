{
  "name": "AwsFsxOntapFileSystem",
  "kind": "AwsFsxOntapFileSystem",
  "cloudProvider": "aws",
  "apiVersion": "aws.openmcf.org/v1",
  "description": "aws-fsx-ontap-file-system",
  "protoPackage": "org.openmcf.provider.aws.awsfsxontapfilesystem.v1",
  "protoFiles": {
    "api": "org/openmcf/provider/aws/awsfsxontapfilesystem/v1/api.proto",
    "spec": "org/openmcf/provider/aws/awsfsxontapfilesystem/v1/spec.proto"
  },
  "spec": {
    "name": "AwsFsxOntapFileSystemSpec",
    "fields": [
      {
        "name": "Region",
        "jsonName": "region",
        "protoField": "region",
        "type": {
          "kind": "string"
        },
        "description": "The AWS region where the resource will be created.\n Example: \"us-west-2\", \"eu-west-1\"",
        "required": false,
        "validation": {
          "minLength": 1
        }
      },
      {
        "name": "DeploymentType",
        "jsonName": "deploymentType",
        "protoField": "deployment_type",
        "type": {
          "kind": "string"
        },
        "description": "Deployment type controlling availability, performance, and scale-out\n characteristics. ForceNew — cannot be changed after creation.\n\n - \"SINGLE_AZ_1\": first-generation single-AZ. Supports multiple HA pairs\n   (1-12) but increasing HA pairs requires replacement.\n - \"SINGLE_AZ_2\": latest single-AZ with scale-out HA pairs (1-12). HA pairs\n   can be increased without replacement. Recommended for most workloads.\n - \"MULTI_AZ_1\": first-generation multi-AZ with automatic failover across\n   two AZs. Fixed at 1 HA pair. Requires two subnets and preferred_subnet_id.\n - \"MULTI_AZ_2\": latest multi-AZ with automatic failover. Fixed at 1 HA pair.\n   Recommended for high-availability workloads.\n\n Default: SINGLE_AZ_2",
        "required": false,
        "default": "SINGLE_AZ_2",
        "oneofGroup": "_deployment_type"
      },
      {
        "name": "StorageCapacityGib",
        "jsonName": "storageCapacityGib",
        "protoField": "storage_capacity_gib",
        "type": {
          "kind": "int32"
        },
        "description": "Storage capacity in GiB. Required.\n\n Valid range: 1024–1048576 GiB (1 TiB – 1 PiB). Storage can be increased\n after creation but never decreased. Choose based on data size; ONTAP's\n built-in compression and deduplication typically achieve 2-5x data reduction.",
        "required": false,
        "validation": {
          "min": 1024,
          "max": 1048576
        }
      },
      {
        "name": "StorageType",
        "jsonName": "storageType",
        "protoField": "storage_type",
        "type": {
          "kind": "string"
        },
        "description": "Storage media type. ForceNew — cannot be changed after creation.\n\n - \"SSD\": solid-state drives. Sub-millisecond latency. Suitable for\n   performance-sensitive workloads (databases, VMware, active data).\n - \"HDD\": hard disk drives with SSD cache. Lower cost for throughput-oriented\n   workloads (data lakes, backups, infrequently accessed data). ONTAP's\n   intelligent tiering automatically caches hot data on SSD.\n\n Default: SSD",
        "required": false,
        "default": "SSD",
        "oneofGroup": "_storage_type"
      },
      {
        "name": "ThroughputCapacityPerHaPair",
        "jsonName": "throughputCapacityPerHaPair",
        "protoField": "throughput_capacity_per_ha_pair",
        "type": {
          "kind": "int32"
        },
        "description": "Throughput capacity per HA pair in MB/s. Required.\n\n Valid values: 128, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096, 6144.\n Total file system throughput = throughput_capacity_per_ha_pair * ha_pairs.\n\n For single HA pair deployments (the common case), this is the total\n throughput. For scale-out deployments with multiple HA pairs, each pair\n contributes this amount independently.\n\n Can be changed after creation for SINGLE_AZ_2 and MULTI_AZ_2 deployment\n types. For SINGLE_AZ_1 and MULTI_AZ_1, increasing throughput requires\n replacement.",
        "required": false
      },
      {
        "name": "HaPairs",
        "jsonName": "haPairs",
        "protoField": "ha_pairs",
        "type": {
          "kind": "int32"
        },
        "description": "Number of high-availability pairs in the file system. Each HA pair adds\n an independent pair of file servers providing throughput and IOPS capacity.\n\n - SINGLE_AZ_1 / SINGLE_AZ_2: 1-12 HA pairs. Scale-out for throughput.\n   SINGLE_AZ_2 can increase HA pairs without replacement. SINGLE_AZ_1\n   requires replacement to add HA pairs.\n - MULTI_AZ_1 / MULTI_AZ_2: must be 1 (single HA pair with failover).\n\n Default: 1",
        "required": false,
        "validation": {
          "min": 1,
          "max": 12
        },
        "default": "1",
        "oneofGroup": "_ha_pairs"
      },
      {
        "name": "SubnetIds",
        "jsonName": "subnetIds",
        "protoField": "subnet_ids",
        "type": {
          "kind": "array",
          "elementType": {
            "kind": "string"
          }
        },
        "description": "Subnet IDs for the file system's network interfaces. Required. ForceNew.\n\n - SINGLE_AZ_1 / SINGLE_AZ_2: exactly one subnet.\n - MULTI_AZ_1 / MULTI_AZ_2: exactly two subnets in different availability zones.\n\n All compute resources accessing this file system (via NFS, SMB, or iSCSI)\n must have network connectivity to these subnets.",
        "required": false,
        "validation": {
          "minItems": 1
        },
        "referenceKind": "AwsVpc",
        "referenceFieldPath": "status.outputs.private_subnets.[*].id"
      },
      {
        "name": "PreferredSubnetId",
        "jsonName": "preferredSubnetId",
        "protoField": "preferred_subnet_id",
        "type": {
          "kind": "string"
        },
        "description": "Preferred subnet for the active file server in a multi-AZ deployment.\n ForceNew. Required when deployment_type is MULTI_AZ_1 or MULTI_AZ_2.\n Must be one of the subnets specified in subnet_ids.\n\n In a failover event, the standby file server in the other subnet takes over\n automatically. Ignored for single-AZ deployments.",
        "required": false,
        "referenceKind": "AwsVpc",
        "referenceFieldPath": "status.outputs.private_subnets.[0].id"
      },
      {
        "name": "SecurityGroupIds",
        "jsonName": "securityGroupIds",
        "protoField": "security_group_ids",
        "type": {
          "kind": "array",
          "elementType": {
            "kind": "string"
          }
        },
        "description": "Security groups for the file system's network interfaces. ForceNew.\n\n Must allow traffic between the file system and its clients:\n - TCP port 111 (portmapper)\n - TCP port 635 (mountd)\n - TCP port 2049 (NFS)\n - TCP port 4045-4046 (NFS lock/status)\n - TCP port 445 (SMB)\n - TCP port 3260 (iSCSI)\n - TCP port 443 (ONTAP REST API)\n\n Up to 50 security groups.",
        "required": false,
        "referenceKind": "AwsSecurityGroup",
        "referenceFieldPath": "status.outputs.security_group_id"
      },
      {
        "name": "EndpointIpAddressRange",
        "jsonName": "endpointIpAddressRange",
        "protoField": "endpoint_ip_address_range",
        "type": {
          "kind": "string"
        },
        "description": "IP address range for the file system endpoints in a multi-AZ deployment.\n ForceNew. Must be a CIDR block within the VPC's CIDR range that does not\n overlap with any existing subnets. AWS assigns floating IPs from this range\n for seamless failover.\n\n Ignored for single-AZ deployments.",
        "required": false
      },
      {
        "name": "RouteTableIds",
        "jsonName": "routeTableIds",
        "protoField": "route_table_ids",
        "type": {
          "kind": "array",
          "elementType": {
            "kind": "string"
          }
        },
        "description": "Route table IDs that need routes to the file system in a multi-AZ\n deployment. AWS automatically manages the routes for failover. Up to 50\n route tables.\n\n Ignored for single-AZ deployments.",
        "required": false
      },
      {
        "name": "KmsKeyId",
        "jsonName": "kmsKeyId",
        "protoField": "kms_key_id",
        "type": {
          "kind": "string"
        },
        "description": "Customer-managed KMS key ARN for encryption at rest. ForceNew — the KMS key\n cannot be changed after creation. When omitted, the file system uses the\n AWS-managed FSx key. All ONTAP file systems are encrypted at rest by\n default; this field upgrades to a customer-managed key.",
        "required": false,
        "referenceKind": "AwsKmsKey",
        "referenceFieldPath": "status.outputs.key_arn"
      },
      {
        "name": "FsxAdminPassword",
        "jsonName": "fsxAdminPassword",
        "protoField": "fsx_admin_password",
        "type": {
          "kind": "string"
        },
        "description": "Password for the ONTAP administrative user (\"fsxadmin\"). Enables SSH and\n REST API access to the file system for advanced administration such as LIF\n management, SnapMirror configuration, and aggregate monitoring.\n\n Length: 8-50 characters. Optional — omit if ONTAP CLI access is not needed.\n This value is sensitive and will not be returned in read operations.",
        "required": false
      },
      {
        "name": "DiskIopsConfiguration",
        "jsonName": "diskIopsConfiguration",
        "protoField": "disk_iops_configuration",
        "type": {
          "kind": "message",
          "messageType": "AwsFsxOntapFileSystemDiskIopsConfiguration"
        },
        "description": "SSD IOPS configuration for the file system. Controls the total provisioned\n IOPS. When omitted, AWS uses AUTOMATIC mode which provisions 3 IOPS per GiB\n of storage capacity. Use USER_PROVISIONED mode for workloads requiring IOPS\n beyond what AUTOMATIC provides.",
        "required": false
      },
      {
        "name": "AutomaticBackupRetentionDays",
        "jsonName": "automaticBackupRetentionDays",
        "protoField": "automatic_backup_retention_days",
        "type": {
          "kind": "int32"
        },
        "description": "Number of days to retain automatic backups. Range: 0-90. Set to 0 to\n disable automatic backups. ONTAP's built-in snapshots provide point-in-time\n recovery independently of FSx backups.\n\n Default: 0 (no automatic backups)",
        "required": false,
        "validation": {
          "max": 90
        },
        "default": "0",
        "oneofGroup": "_automatic_backup_retention_days"
      },
      {
        "name": "DailyAutomaticBackupStartTime",
        "jsonName": "dailyAutomaticBackupStartTime",
        "protoField": "daily_automatic_backup_start_time",
        "type": {
          "kind": "string"
        },
        "description": "Daily UTC time to start automatic backups, in HH:MM format (e.g., \"05:00\").\n If not specified and backups are enabled, AWS chooses a default window.",
        "required": false
      },
      {
        "name": "CopyTagsToBackups",
        "jsonName": "copyTagsToBackups",
        "protoField": "copy_tags_to_backups",
        "type": {
          "kind": "bool"
        },
        "description": "Copy tags from the file system to backups.",
        "required": false
      },
      {
        "name": "SkipFinalBackup",
        "jsonName": "skipFinalBackup",
        "protoField": "skip_final_backup",
        "type": {
          "kind": "bool"
        },
        "description": "Skip creating a final backup when the file system is deleted.\n\n Default: true",
        "required": false,
        "default": "true",
        "oneofGroup": "_skip_final_backup"
      },
      {
        "name": "WeeklyMaintenanceStartTime",
        "jsonName": "weeklyMaintenanceStartTime",
        "protoField": "weekly_maintenance_start_time",
        "type": {
          "kind": "string"
        },
        "description": "Weekly UTC maintenance window in the format \"d:HH:MM\" where d is the day of\n the week (1=Monday, 7=Sunday). Example: \"7:02:00\" for Sunday at 02:00 UTC.\n If not specified, AWS chooses a default window.",
        "required": false
      }
    ]
  },
  "nestedTypes": [
    {
      "name": "AwsFsxOntapFileSystemDiskIopsConfiguration",
      "description": "AwsFsxOntapFileSystemDiskIopsConfiguration controls the SSD IOPS provisioned\n for the file system. In AUTOMATIC mode, IOPS scale with storage capacity\n (3 IOPS per GiB). In USER_PROVISIONED mode, you specify the exact IOPS\n independently of storage, up to 2,400,000 IOPS for scale-out configurations.",
      "protoType": "org.openmcf.provider.aws.awsfsxontapfilesystem.v1.AwsFsxOntapFileSystemDiskIopsConfiguration",
      "fields": [
        {
          "name": "Mode",
          "jsonName": "mode",
          "protoField": "mode",
          "type": {
            "kind": "string"
          },
          "description": "IOPS provisioning mode.\n\n - \"AUTOMATIC\": IOPS scale automatically based on storage capacity.\n   Provides 3 IOPS per GiB of storage.\n - \"USER_PROVISIONED\": you specify the exact IOPS via the `iops` field.\n   Allows higher performance independent of storage size but at extra cost.\n\n Default: AUTOMATIC",
          "required": false,
          "default": "AUTOMATIC",
          "oneofGroup": "_mode"
        },
        {
          "name": "Iops",
          "jsonName": "iops",
          "protoField": "iops",
          "type": {
            "kind": "int32"
          },
          "description": "Total SSD IOPS provisioned. Only valid when mode is \"USER_PROVISIONED\".\n\n Valid range: 0–2,400,000. The maximum achievable IOPS depends on the number\n of HA pairs and their throughput capacity tier.",
          "required": false
        }
      ]
    }
  ]
}
