{
  "name": "AwsKinesisStream",
  "kind": "AwsKinesisStream",
  "cloudProvider": "aws",
  "apiVersion": "aws.openmcf.org/v1",
  "description": "AwsKinesisStream is the Kubernetes-style resource envelope for an Amazon\n Kinesis Data Stream.",
  "protoPackage": "org.openmcf.provider.aws.awskinesisstream.v1",
  "protoFiles": {
    "api": "org/openmcf/provider/aws/awskinesisstream/v1/api.proto",
    "spec": "org/openmcf/provider/aws/awskinesisstream/v1/spec.proto"
  },
  "spec": {
    "name": "AwsKinesisStreamSpec",
    "fields": [
      {
        "name": "Region",
        "jsonName": "region",
        "protoField": "region",
        "type": {
          "kind": "string"
        },
        "description": "The AWS region where the resource will be created.\n Example: \"us-west-2\", \"eu-west-1\"",
        "required": false,
        "validation": {
          "minLength": 1
        }
      },
      {
        "name": "StreamMode",
        "jsonName": "streamMode",
        "protoField": "stream_mode",
        "type": {
          "kind": "string"
        },
        "description": "Capacity mode for the stream. This is a fundamental design choice that\n determines pricing model, scaling behavior, and operational overhead.\n\n Valid values:\n - \"PROVISIONED\": You manage shard count explicitly. Each shard provides\n   1 MB/s ingestion and 2 MB/s consumption. Cost-effective for steady,\n   predictable workloads.\n - \"ON_DEMAND\": AWS auto-scales shards to match throughput. Supports up to\n   200 MB/s write and 400 MB/s read. Best for variable or unpredictable\n   workloads. No capacity planning required.\n\n This field is required. There is no default -- you must make an explicit\n choice because the two modes have fundamentally different cost and\n operational characteristics.",
        "required": false
      },
      {
        "name": "ShardCount",
        "jsonName": "shardCount",
        "protoField": "shard_count",
        "type": {
          "kind": "int32"
        },
        "description": "Number of open shards in the stream. Each shard provides 1 MB/s write\n (1,000 records/s) and 2 MB/s read capacity.\n\n Required when stream_mode is \"PROVISIONED\" (must be \u003e= 1).\n Must be 0 (or omitted) when stream_mode is \"ON_DEMAND\" because AWS\n manages shard count automatically.\n\n Can be updated after creation to scale provisioned streams. AWS uses\n uniform scaling (UpdateShardCount with UNIFORM_SCALING strategy).",
        "required": false
      },
      {
        "name": "RetentionPeriodHours",
        "jsonName": "retentionPeriodHours",
        "protoField": "retention_period_hours",
        "type": {
          "kind": "int32"
        },
        "description": "Duration in hours that data records remain accessible after being added to\n the stream. After the retention period expires, records are no longer\n accessible via GetRecords.\n\n Range: 24–8760 (1 day to 365 days). AWS default: 24 hours.\n Leave at 0 to use the AWS default.\n\n Increasing retention is useful for reprocessing scenarios and late-arriving\n consumers. Note: extended retention (beyond 24h) incurs additional cost.",
        "required": false
      },
      {
        "name": "KmsKeyId",
        "jsonName": "kmsKeyId",
        "protoField": "kms_key_id",
        "type": {
          "kind": "string"
        },
        "description": "Customer-managed KMS key for server-side encryption of data at rest. When\n set, the IaC modules automatically configure KMS encryption (encryption_type\n = \"KMS\"). When absent, encryption is disabled (encryption_type = \"NONE\").\n\n Accepts a KMS key ID, key ARN, alias name (e.g., \"alias/aws/kinesis\"), or\n alias ARN. Also accepts a reference to an AwsKmsKey resource.\n\n Encryption can be enabled or disabled after stream creation (not ForceNew).",
        "required": false,
        "referenceKind": "AwsKmsKey",
        "referenceFieldPath": "status.outputs.key_arn"
      },
      {
        "name": "MaxRecordSizeInKib",
        "jsonName": "maxRecordSizeInKib",
        "protoField": "max_record_size_in_kib",
        "type": {
          "kind": "int32"
        },
        "description": "Maximum size of a single data record in KiB (kibibytes). Records exceeding\n this limit are rejected by the PutRecord/PutRecords API.\n\n Range: 1024–10240 (1 MiB to 10 MiB). AWS default: 1024 (1 MiB).\n Leave at 0 to use the AWS default.\n\n Larger record sizes are useful for aggregated events, rich JSON payloads,\n or binary data. Note: larger records consume more shard capacity.",
        "required": false
      },
      {
        "name": "ShardLevelMetrics",
        "jsonName": "shardLevelMetrics",
        "protoField": "shard_level_metrics",
        "type": {
          "kind": "array",
          "elementType": {
            "kind": "string"
          }
        },
        "description": "Shard-level CloudWatch metrics to enable. By default, Kinesis only provides\n stream-level metrics. Enabling shard-level metrics allows monitoring of\n individual shard performance, which is critical for identifying hot shards\n and capacity bottlenecks in production.\n\n Valid values (one or more):\n - \"IncomingBytes\" -- bytes written per shard\n - \"IncomingRecords\" -- records written per shard\n - \"OutgoingBytes\" -- bytes read per shard\n - \"OutgoingRecords\" -- records read per shard\n - \"WriteProvisionedThroughputExceeded\" -- throttled write requests\n - \"ReadProvisionedThroughputExceeded\" -- throttled read requests\n - \"IteratorAgeMilliseconds\" -- consumer lag per shard\n\n Enhanced metrics incur additional CloudWatch cost per metric per shard.\n Leave empty to use stream-level metrics only (no additional cost).",
        "required": false
      },
      {
        "name": "EnforceConsumerDeletion",
        "jsonName": "enforceConsumerDeletion",
        "protoField": "enforce_consumer_deletion",
        "type": {
          "kind": "bool"
        },
        "description": "When true, all registered enhanced fan-out consumers are automatically\n deregistered before the stream is deleted, preventing deletion errors.\n When false (default), deleting a stream with active consumers will fail.\n\n This is an operational setting that only affects stream deletion. It has\n no impact on the running stream.",
        "required": false
      }
    ]
  }
}
