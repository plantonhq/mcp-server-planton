{
  "name": "AwsMemorydbCluster",
  "kind": "AwsMemorydbCluster",
  "cloudProvider": "aws",
  "apiVersion": "aws.openmcf.org/v1",
  "description": "AwsMemorydbCluster is a deployment component for creating and managing\n Amazon MemoryDB clusters — a fully managed, Redis-compatible, durable\n in-memory database with microsecond reads and single-digit millisecond writes.",
  "protoPackage": "org.openmcf.provider.aws.awsmemorydbcluster.v1",
  "protoFiles": {
    "api": "org/openmcf/provider/aws/awsmemorydbcluster/v1/api.proto",
    "spec": "org/openmcf/provider/aws/awsmemorydbcluster/v1/spec.proto"
  },
  "spec": {
    "name": "AwsMemorydbClusterSpec",
    "fields": [
      {
        "name": "Region",
        "jsonName": "region",
        "protoField": "region",
        "type": {
          "kind": "string"
        },
        "description": "The AWS region where the resource will be created.\n Example: \"us-west-2\", \"eu-west-1\"",
        "required": false,
        "validation": {
          "minLength": 1
        }
      },
      {
        "name": "Engine",
        "jsonName": "engine",
        "protoField": "engine",
        "type": {
          "kind": "string"
        },
        "description": "Cache engine to use. Redis is the standard choice; Valkey is the\n open-source Redis-compatible alternative. Values: \"redis\", \"valkey\".",
        "required": true,
        "validation": {
          "required": true
        }
      },
      {
        "name": "EngineVersion",
        "jsonName": "engineVersion",
        "protoField": "engine_version",
        "type": {
          "kind": "string"
        },
        "description": "Engine version to deploy. Examples: \"7.1\", \"7.0\", \"6.2\" for Redis;\n \"7.2\" for Valkey. Leave empty to use the provider default.",
        "required": false
      },
      {
        "name": "Description",
        "jsonName": "description",
        "protoField": "description",
        "type": {
          "kind": "string"
        },
        "description": "Human-readable description for the cluster.",
        "required": false
      },
      {
        "name": "NodeType",
        "jsonName": "nodeType",
        "protoField": "node_type",
        "type": {
          "kind": "string"
        },
        "description": "MemoryDB node type. Determines CPU, memory, and network capacity.\n Examples: \"db.t4g.small\" (dev), \"db.r7g.large\" (production),\n \"db.r6gd.xlarge\" (data tiering).",
        "required": true,
        "validation": {
          "required": true
        }
      },
      {
        "name": "Port",
        "jsonName": "port",
        "protoField": "port",
        "type": {
          "kind": "int32"
        },
        "description": "Port on which the cluster accepts connections. Default: 6379.\n ForceNew — changing it destroys and recreates the cluster.",
        "required": false,
        "validation": {
          "min": 1,
          "max": 65535
        },
        "default": "6379",
        "oneofGroup": "_port"
      },
      {
        "name": "NumShards",
        "jsonName": "numShards",
        "protoField": "num_shards",
        "type": {
          "kind": "int32"
        },
        "description": "Number of shards (data partitions) in the cluster. Each shard holds a\n portion of the keyspace. Default: 1.",
        "required": false,
        "validation": {
          "min": 1
        },
        "default": "1",
        "oneofGroup": "_num_shards"
      },
      {
        "name": "NumReplicasPerShard",
        "jsonName": "numReplicasPerShard",
        "protoField": "num_replicas_per_shard",
        "type": {
          "kind": "int32"
        },
        "description": "Number of read replicas per shard. Range: 0–5. Default: 1 (i.e., each\n shard has 1 primary + 1 replica = 2 nodes).",
        "required": false,
        "validation": {
          "max": 5
        },
        "default": "1",
        "oneofGroup": "_num_replicas_per_shard"
      },
      {
        "name": "AclName",
        "jsonName": "aclName",
        "protoField": "acl_name",
        "type": {
          "kind": "string"
        },
        "description": "Name of the MemoryDB Access Control List (ACL) to associate with the cluster.\n The ACL defines which users can access the cluster and what commands they can\n execute. Use \"open-access\" for development (no authentication required when\n TLS is enabled) or reference a custom ACL for production.\n When tls_enabled is false, this must be \"open-access\".",
        "required": false,
        "validation": {
          "minLength": 1
        },
        "default": "open-access",
        "oneofGroup": "_acl_name"
      },
      {
        "name": "SubnetIds",
        "jsonName": "subnetIds",
        "protoField": "subnet_ids",
        "type": {
          "kind": "array",
          "elementType": {
            "kind": "string"
          }
        },
        "description": "Subnet IDs for the MemoryDB subnet group. Provide subnets in at least two\n AZs for multi-AZ resilience. A subnet group is created automatically from\n these subnets.",
        "required": false,
        "referenceKind": "AwsVpc",
        "referenceFieldPath": "status.outputs.private_subnets.[*].id"
      },
      {
        "name": "SecurityGroupIds",
        "jsonName": "securityGroupIds",
        "protoField": "security_group_ids",
        "type": {
          "kind": "array",
          "elementType": {
            "kind": "string"
          }
        },
        "description": "VPC security groups to attach to the cluster nodes. Controls network-level\n access to the MemoryDB endpoint.",
        "required": false,
        "referenceKind": "AwsSecurityGroup",
        "referenceFieldPath": "status.outputs.security_group_id"
      },
      {
        "name": "TlsEnabled",
        "jsonName": "tlsEnabled",
        "protoField": "tls_enabled",
        "type": {
          "kind": "bool"
        },
        "description": "Enable TLS for in-transit encryption on all client connections. When false,\n acl_name must be \"open-access\". ForceNew — changing it destroys and\n recreates the cluster.",
        "required": false,
        "default": "true",
        "oneofGroup": "_tls_enabled"
      },
      {
        "name": "KmsKeyId",
        "jsonName": "kmsKeyId",
        "protoField": "kms_key_id",
        "type": {
          "kind": "string"
        },
        "description": "Customer-managed KMS key ARN for at-rest encryption. MemoryDB always encrypts\n data at rest; this field optionally specifies your own key instead of the\n AWS-managed key. ForceNew — changing it destroys and recreates the cluster.",
        "required": false,
        "referenceKind": "AwsKmsKey",
        "referenceFieldPath": "status.outputs.key_arn"
      },
      {
        "name": "MaintenanceWindow",
        "jsonName": "maintenanceWindow",
        "protoField": "maintenance_window",
        "type": {
          "kind": "string"
        },
        "description": "Weekly maintenance window in UTC. Format: \"ddd:hh24:mi-ddd:hh24:mi\".\n Example: \"sun:05:00-sun:06:00\". Leave empty for AWS-assigned default.",
        "required": false,
        "validation": {
          "pattern": "^(mon|tue|wed|thu|fri|sat|sun):([01][0-9]|2[0-3]):[0-5][0-9]-(mon|tue|wed|thu|fri|sat|sun):([01][0-9]|2[0-3]):[0-5][0-9]$"
        }
      },
      {
        "name": "SnapshotRetentionLimit",
        "jsonName": "snapshotRetentionLimit",
        "protoField": "snapshot_retention_limit",
        "type": {
          "kind": "int32"
        },
        "description": "Number of days to retain automatic snapshots. 0 disables automatic snapshots.\n Range: 0–35.",
        "required": false,
        "validation": {
          "max": 35
        }
      },
      {
        "name": "SnapshotWindow",
        "jsonName": "snapshotWindow",
        "protoField": "snapshot_window",
        "type": {
          "kind": "string"
        },
        "description": "Daily snapshot window in UTC. Format: \"hh24:mi-hh24:mi\".\n Example: \"05:00-09:00\". Leave empty for AWS-assigned default.",
        "required": false,
        "validation": {
          "pattern": "^([01][0-9]|2[0-3]):[0-5][0-9]-([01][0-9]|2[0-3]):[0-5][0-9]$"
        }
      },
      {
        "name": "FinalSnapshotName",
        "jsonName": "finalSnapshotName",
        "protoField": "final_snapshot_name",
        "type": {
          "kind": "string"
        },
        "description": "Name of the final snapshot to create when the cluster is deleted. If not\n provided, no final snapshot is created.",
        "required": false
      },
      {
        "name": "SnapshotArns",
        "jsonName": "snapshotArns",
        "protoField": "snapshot_arns",
        "type": {
          "kind": "array",
          "elementType": {
            "kind": "string"
          }
        },
        "description": "ARN(s) of RDB snapshot files stored in S3 to restore data from.\n ForceNew — only used at cluster creation time. Mutually exclusive with\n snapshot_name.",
        "required": false
      },
      {
        "name": "SnapshotName",
        "jsonName": "snapshotName",
        "protoField": "snapshot_name",
        "type": {
          "kind": "string"
        },
        "description": "Name of a MemoryDB snapshot to restore from. ForceNew — only used at\n cluster creation time. Mutually exclusive with snapshot_arns.",
        "required": false
      },
      {
        "name": "ParameterGroupFamily",
        "jsonName": "parameterGroupFamily",
        "protoField": "parameter_group_family",
        "type": {
          "kind": "string"
        },
        "description": "Parameter group family. Required when `parameters` is provided.\n Examples: \"memorydb_redis7\", \"memorydb_redis6\".",
        "required": false
      },
      {
        "name": "Parameters",
        "jsonName": "parameters",
        "protoField": "parameters",
        "type": {
          "kind": "array",
          "elementType": {
            "kind": "message",
            "messageType": "AwsMemorydbClusterParameter"
          }
        },
        "description": "Custom MemoryDB parameters to apply via a managed parameter group.\n Common examples: activedefrag, maxmemory-policy.",
        "required": false
      },
      {
        "name": "SnsTopicArn",
        "jsonName": "snsTopicArn",
        "protoField": "sns_topic_arn",
        "type": {
          "kind": "string"
        },
        "description": "SNS topic ARN for cluster event notifications (failover, maintenance,\n configuration changes, etc.).",
        "required": false,
        "referenceKind": "AwsSnsTopic",
        "referenceFieldPath": "status.outputs.topic_arn"
      },
      {
        "name": "AutoMinorVersionUpgrade",
        "jsonName": "autoMinorVersionUpgrade",
        "protoField": "auto_minor_version_upgrade",
        "type": {
          "kind": "bool"
        },
        "description": "Automatically apply minor engine version upgrades during maintenance windows.\n Default: true.",
        "required": false,
        "default": "true",
        "oneofGroup": "_auto_minor_version_upgrade"
      },
      {
        "name": "DataTiering",
        "jsonName": "dataTiering",
        "protoField": "data_tiering",
        "type": {
          "kind": "bool"
        },
        "description": "Enable data tiering — automatically moves less-frequently-accessed data to\n SSD storage for cost efficiency with large datasets. Only available on\n specific node types (db.r6gd.*). ForceNew — cannot be changed after creation.",
        "required": false
      }
    ]
  },
  "nestedTypes": [
    {
      "name": "AwsMemorydbClusterParameter",
      "description": "AwsMemorydbClusterParameter defines a single parameter override for the\n managed parameter group. Parameters tune Redis/Valkey engine behavior\n (e.g., activedefrag, maxmemory-policy).",
      "protoType": "org.openmcf.provider.aws.awsmemorydbcluster.v1.AwsMemorydbClusterParameter",
      "fields": [
        {
          "name": "Name",
          "jsonName": "name",
          "protoField": "name",
          "type": {
            "kind": "string"
          },
          "description": "Parameter name (e.g., \"activedefrag\", \"maxmemory-policy\").",
          "required": true,
          "validation": {
            "required": true
          }
        },
        {
          "name": "Value",
          "jsonName": "value",
          "protoField": "value",
          "type": {
            "kind": "string"
          },
          "description": "Parameter value (e.g., \"yes\", \"volatile-lru\").",
          "required": true,
          "validation": {
            "required": true
          }
        }
      ]
    }
  ]
}
