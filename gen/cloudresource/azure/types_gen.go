// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-26T21:50:49+05:30
// Shared types used by multiple providers in the azure package.

package azure

import "fmt"

var _ = fmt.Errorf

// AzureHealthProbe defines a custom health check for backend servers.
//
//	Custom probes provide more accurate health status than the default
//	Azure probe (which checks GET / on the backend port).
type AzureHealthProbeInput struct {
	// The name of the health probe.
	//  Must be unique within the Application Gateway. Referenced by
	//  backend HTTP settings via `probe_name`.
	//  Examples: "api-health", "web-health", "readiness-check".
	Name string `json:"name" jsonschema:"required,The name of the health probe. Must be unique within the Application Gateway. Referenced by backend HTTP settings via 'probe_name'. Examples: 'api-health'; 'web-health'; 'readiness-check'."`
	// The protocol used for the health probe.
	//  Uses Azure's exact API values.
	//
	//  Valid values:
	//  - "Http" -- HTTP health check
	//  - "Https" -- HTTPS health check
	Protocol string `json:"protocol" jsonschema:"required,The protocol used for the health probe. Uses Azure's exact API values. Valid values: - 'Http' -- HTTP health check - 'Https' -- HTTPS health check"`
	// The URI path for the health probe request.
	//  The probe sends a GET request to this path and considers the
	//  backend healthy if it returns HTTP 200-399.
	//  Examples: "/health", "/api/healthz", "/ready".
	Path string `json:"path" jsonschema:"required,The URI path for the health probe request. The probe sends a GET request to this path and considers the backend healthy if it returns HTTP 200-399. Examples: '/health'; '/api/healthz'; '/ready'."`
	// The host header value for the health probe request.
	//  If omitted, the probe uses the backend server's IP/FQDN as the host.
	//  Useful when backends require a specific Host header.
	Host string `json:"host,omitempty" jsonschema:"The host header value for the health probe request. If omitted; the probe uses the backend server's IP/FQDN as the host. Useful when backends require a specific Host header."`
	// The interval between probe attempts, in seconds.
	//  Lower values detect failures faster but generate more traffic.
	//  Range: 1 to 86400 seconds. Default: 30 seconds.
	Interval int32 `json:"interval,omitempty" jsonschema:"The interval between probe attempts; in seconds. Lower values detect failures faster but generate more traffic. Range: 1 to 86400 seconds. Default: 30 seconds."`
	// The probe timeout in seconds.
	//  If the backend does not respond within this time, the probe
	//  is considered failed. Range: 1 to 86400 seconds. Default: 30 seconds.
	Timeout int32 `json:"timeout,omitempty" jsonschema:"The probe timeout in seconds. If the backend does not respond within this time; the probe is considered failed. Range: 1 to 86400 seconds. Default: 30 seconds."`
	// The number of consecutive probe failures before marking a backend
	//  as unhealthy. Range: 1 to 20. Default: 3.
	UnhealthyThreshold int32 `json:"unhealthy_threshold,omitempty" jsonschema:"The number of consecutive probe failures before marking a backend as unhealthy. Range: 1 to 20. Default: 3."`
}

func (s *AzureHealthProbeInput) validate() error {
	if s.Name == "" {
		return fmt.Errorf("name is required")
	}
	if s.Protocol == "" {
		return fmt.Errorf("protocol is required")
	}
	if s.Path == "" {
		return fmt.Errorf("path is required")
	}
	return nil
}

func (s *AzureHealthProbeInput) applyDefaults() {
	if s.Interval == 0 {
		s.Interval = 30
	}
	if s.Timeout == 0 {
		s.Timeout = 30
	}
	if s.UnhealthyThreshold == 0 {
		s.UnhealthyThreshold = 3
	}
}

func (s *AzureHealthProbeInput) toMap() map[string]any {
	m := make(map[string]any)
	m["name"] = s.Name
	m["protocol"] = s.Protocol
	m["path"] = s.Path
	if s.Host != "" {
		m["host"] = s.Host
	}
	if s.Interval != 0 {
		m["interval"] = s.Interval
	}
	if s.Timeout != 0 {
		m["timeout"] = s.Timeout
	}
	if s.UnhealthyThreshold != 0 {
		m["unhealthy_threshold"] = s.UnhealthyThreshold
	}
	return m
}
