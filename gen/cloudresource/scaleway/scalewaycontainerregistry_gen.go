// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-26T21:50:49+05:30

package scaleway

import (
	"encoding/json"
	"fmt"

	"github.com/plantoncloud/mcp-server-planton/gen/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// scaleway-container-registry
type ScalewayContainerRegistrySpecInput struct {
	// The Scaleway region where the registry namespace will be created.
	//
	//  The region determines the Docker endpoint URL:
	//    `rg.<region>.scw.cloud/<namespace-name>`
	//
	//  Available regions: "fr-par", "nl-ams", "pl-waw"
	//
	//  Choose the region closest to your build infrastructure and
	//  deployment targets for lowest...
	Region string `json:"region" jsonschema:"required,The Scaleway region where the registry namespace will be created. The region determines the Docker endpoint URL: 'rg.<region>.scw.cloud/<namespace-name>' Available regions: 'fr-par'; 'nl-ams'; 'pl-waw..."`
	// Optional human-readable description of the registry namespace.
	//
	//  Useful for documenting the purpose of the registry (e.g.,
	//  "Production microservices images", "Staging environment artifacts",
	//  "Shared base images").
	//
	//  Has no effect on registry behavior. Displayed in the Scaleway
	//  Console for identif...
	Description string `json:"description,omitempty" jsonschema:"Optional human-readable description of the registry namespace. Useful for documenting the purpose of the registry (e.g.; 'Production microservices images'; 'Staging environment artifacts'; 'Shared bas..."`
	// Whether images in this namespace can be pulled without
	//  authentication.
	//
	//  When false (default): Images require authentication to pull.
	//  Suitable for proprietary application images, internal tools, and
	//  any images that should not be publicly accessible.
	//
	//  When true: Anyone can pull images from this n...
	IsPublic bool `json:"is_public,omitempty" jsonschema:"Whether images in this namespace can be pulled without authentication. When false (default): Images require authentication to pull. Suitable for proprietary application images; internal tools; and any..."`
}

func (s *ScalewayContainerRegistrySpecInput) validate() error {
	if s.Region == "" {
		return fmt.Errorf("region is required")
	}
	return nil
}

func (s *ScalewayContainerRegistrySpecInput) applyDefaults() {
}

func (s *ScalewayContainerRegistrySpecInput) toMap() map[string]any {
	m := make(map[string]any)
	m["region"] = s.Region
	if s.Description != "" {
		m["description"] = s.Description
	}
	if s.IsPublic {
		m["is_public"] = s.IsPublic
	}
	return m
}

// ParseScalewayContainerRegistry validates and normalizes a ScalewayContainerRegistry cloud_object.
func ParseScalewayContainerRegistry(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "scaleway.openmcf.org/v1", "ScalewayContainerRegistry"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec ScalewayContainerRegistrySpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
