// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-26T22:50:56+05:30

package scaleway

import (
	"encoding/json"
	"fmt"

	"github.com/plantoncloud/mcp-server-planton/internal/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// scaleway-private-network
type ScalewayPrivateNetworkSpecInput struct {
	// The VPC in which to create this Private Network.
	//
	//  Can be a literal VPC UUID or a reference to a ScalewayVpc resource's output.
	//  When used inside an infra chart, this is typically wired via valueFrom:
	//
	//    vpcId:
	//      valueFrom:
	//        kind: ScalewayVpc
	//        name: my-vpc
	//        fieldPath: status.ou...
	VpcId string `json:"vpc_id" jsonschema:"required,The VPC in which to create this Private Network. Can be a literal VPC UUID or a reference to a ScalewayVpc resource's output. When used inside an infra chart; this is typically wired via valueFrom: vp..."`
	// The Scaleway region where the Private Network will be created.
	//  Examples: "fr-par", "nl-ams", "pl-waw"
	//
	//  Must match the region of the parent VPC. This field is required and
	//  cannot be changed after creation.
	Region string `json:"region" jsonschema:"required,The Scaleway region where the Private Network will be created. Examples: 'fr-par'; 'nl-ams'; 'pl-waw' Must match the region of the parent VPC. This field is required and cannot be changed after creati..."`
	// IPv4 subnet in CIDR notation to associate with this Private Network.
	//  Examples: "192.168.0.0/24", "10.0.1.0/24", "172.16.0.0/22"
	//
	//  If omitted, Scaleway's IPAM automatically allocates a subnet from a
	//  default range. Specifying a subnet gives you control over the address
	//  space, which is important whe...
	Ipv4Subnet string `json:"ipv4_subnet,omitempty" jsonschema:"IPv4 subnet in CIDR notation to associate with this Private Network. Examples: '192.168.0.0/24'; '10.0.1.0/24'; '172.16.0.0/22' If omitted; Scaleway's IPAM automatically allocates a subnet from a defa..."`
	// IPv6 subnets in CIDR notation to associate with this Private Network.
	//  Examples: "fd46:78ab:30b8:177c::/64"
	//
	//  Optional. Multiple IPv6 subnets can be attached for dual-stack networking.
	//  Most production deployments use IPv4 only; IPv6 is primarily useful for
	//  workloads that must be reachable on IPv6 ...
	Ipv6Subnets []string `json:"ipv6_subnets,omitempty" jsonschema:"IPv6 subnets in CIDR notation to associate with this Private Network. Examples: 'fd46:78ab:30b8:177c::/64' Optional. Multiple IPv6 subnets can be attached for dual-stack networking. Most production de..."`
	// Whether to propagate default IPv4 and IPv6 routes for this Private Network.
	//
	//  When enabled, resources in this Private Network receive the VPC's default
	//  routes, enabling them to communicate with resources in other Private Networks
	//  within the same VPC (provided the VPC has routing enabled).
	//
	//  Defaul...
	EnableDefaultRoutePropagation bool `json:"enable_default_route_propagation,omitempty" jsonschema:"Whether to propagate default IPv4 and IPv6 routes for this Private Network. When enabled; resources in this Private Network receive the VPC's default routes; enabling them to communicate with resource..."`
}

func (s *ScalewayPrivateNetworkSpecInput) validate() error {
	if s.VpcId == "" {
		return fmt.Errorf("vpc_id is required")
	}
	if s.Region == "" {
		return fmt.Errorf("region is required")
	}
	return nil
}

func (s *ScalewayPrivateNetworkSpecInput) applyDefaults() {
}

func (s *ScalewayPrivateNetworkSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	m["vpc_id"] = s.VpcId
	m["region"] = s.Region
	if s.Ipv4Subnet != "" {
		m["ipv4_subnet"] = s.Ipv4Subnet
	}
	if len(s.Ipv6Subnets) > 0 {
		m["ipv6_subnets"] = s.Ipv6Subnets
	}
	if s.EnableDefaultRoutePropagation {
		m["enable_default_route_propagation"] = s.EnableDefaultRoutePropagation
	}
	return m
}

// ParseScalewayPrivateNetwork validates and normalizes a ScalewayPrivateNetwork cloud_object.
func ParseScalewayPrivateNetwork(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "scaleway.openmcf.org/v1", "ScalewayPrivateNetwork"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec ScalewayPrivateNetworkSpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
