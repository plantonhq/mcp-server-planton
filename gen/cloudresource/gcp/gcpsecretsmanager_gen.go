// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-26T22:01:03+05:30

package gcp

import (
	"encoding/json"
	"fmt"

	"github.com/plantoncloud/mcp-server-planton/internal/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// gcp-secrets-manager
type GcpSecretsManagerSpecInput struct {
	// The GCP project ID where the secrets will be created.
	//  Can be provided as a literal value or as a reference to another resource's output.
	//  Example (literal): {value: "my-gcp-project-123456"}
	//  Example (reference): {value_from: {kind: GcpProject, name: "main-project"}}
	ProjectId string `json:"project_id" jsonschema:"required,The GCP project ID where the secrets will be created. Can be provided as a literal value or as a reference to another resource's output. Example (literal): {value: 'my-gcp-project-123456'} Example (re..."`
	// A list of secret names to create in Google Cloud Secrets Manager.
	//  Each name represents a unique secret that can store sensitive data securely.
	SecretNames []string `json:"secret_names,omitempty" jsonschema:"A list of secret names to create in Google Cloud Secrets Manager. Each name represents a unique secret that can store sensitive data securely."`
}

func (s *GcpSecretsManagerSpecInput) validate() error {
	if s.ProjectId == "" {
		return fmt.Errorf("project_id is required")
	}
	return nil
}

func (s *GcpSecretsManagerSpecInput) applyDefaults() {
}

func (s *GcpSecretsManagerSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	m["project_id"] = s.ProjectId
	if len(s.SecretNames) > 0 {
		m["secret_names"] = s.SecretNames
	}
	return m
}

// ParseGcpSecretsManager validates and normalizes a GcpSecretsManager cloud_object.
func ParseGcpSecretsManager(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "gcp.openmcf.org/v1", "GcpSecretsManager"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec GcpSecretsManagerSpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
