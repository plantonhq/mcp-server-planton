// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-26T22:01:03+05:30

package alicloud

import (
	"encoding/json"
	"fmt"

	"github.com/plantoncloud/mcp-server-planton/internal/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// alicloud-cdn-domain
type AliCloudCdnDomainSpecInput struct {
	// Alibaba Cloud region for provider initialization.
	//  CDN is a global service, but the provider requires a region for API calls.
	//  Examples: "cn-hangzhou", "cn-shanghai", "us-west-1", "ap-southeast-1".
	Region string `json:"region" jsonschema:"required,Alibaba Cloud region for provider initialization. CDN is a global service; but the provider requires a region for API calls. Examples: 'cn-hangzhou'; 'cn-shanghai'; 'us-west-1'; 'ap-southeast-1'."`
	// The accelerated domain name (e.g., "cdn.example.com").
	//  Must be a valid domain name between 1 and 63 characters.
	//  Cannot be changed after creation (ForceNew).
	DomainName string `json:"domain_name" jsonschema:"required,The accelerated domain name (e.g.; 'cdn.example.com'). Must be a valid domain name between 1 and 63 characters. Cannot be changed after creation (ForceNew)."`
	// The type of content the CDN accelerates.
	//  Cannot be changed after creation (ForceNew).
	//    - "web"      : images, small files, and web pages
	//    - "download" : large file downloads (software, games)
	//    - "video"    : on-demand and live video streaming
	CdnType string `json:"cdn_type" jsonschema:"required,The type of content the CDN accelerates. Cannot be changed after creation (ForceNew). - 'web' : images; small files; and web pages - 'download' : large file downloads (software; games) - 'video' : on-..."`
	// Geographic scope for CDN acceleration.
	//    - "domestic" : mainland China only
	//    - "overseas" : outside mainland China
	//    - "global"   : worldwide
	//  If omitted, the Alibaba Cloud API defaults to "domestic".
	Scope string `json:"scope,omitempty" jsonschema:"Geographic scope for CDN acceleration. - 'domestic' : mainland China only - 'overseas' : outside mainland China - 'global' : worldwide If omitted; the Alibaba Cloud API defaults to 'domestic'."`
	// Origin server sources for the CDN domain. At least one source is required.
	//  Multiple sources enable failover and load distribution via priority and weight.
	Sources []*AliCloudCdnDomainSourceInput `json:"sources,omitempty" jsonschema:"Origin server sources for the CDN domain. At least one source is required. Multiple sources enable failover and load distribution via priority and weight."`
	// HTTPS certificate configuration.
	//  If omitted, the CDN domain serves content over HTTP only.
	CertificateConfig *AliCloudCdnDomainCertificateConfigInput `json:"certificate_config,omitempty" jsonschema:"HTTPS certificate configuration. If omitted; the CDN domain serves content over HTTP only."`
	// URL used by the CDN service to verify that the origin is reachable.
	//  Alibaba Cloud sends a request to this URL during domain creation.
	//  If omitted, no health check is performed during creation.
	CheckUrl string `json:"check_url,omitempty" jsonschema:"URL used by the CDN service to verify that the origin is reachable. Alibaba Cloud sends a request to this URL during domain creation. If omitted; no health check is performed during creation."`
	// Alibaba Cloud resource group ID for access control and cost attribution.
	//  If omitted, the domain is placed in the account's default resource group.
	ResourceGroupId string `json:"resource_group_id,omitempty" jsonschema:"Alibaba Cloud resource group ID for access control and cost attribution. If omitted; the domain is placed in the account's default resource group."`
	// Tags to apply to the CDN domain.
	Tags map[string]string `json:"tags,omitempty" jsonschema:"Tags to apply to the CDN domain."`
}

func (s *AliCloudCdnDomainSpecInput) validate() error {
	if s.Region == "" {
		return fmt.Errorf("region is required")
	}
	if s.DomainName == "" {
		return fmt.Errorf("domain_name is required")
	}
	if s.CdnType == "" {
		return fmt.Errorf("cdn_type is required")
	}
	if len(s.Sources) < 1 {
		return fmt.Errorf("sources requires at least 1 items, got %d", len(s.Sources))
	}
	for i, v := range s.Sources {
		if v != nil {
			if err := v.validate(); err != nil {
				return fmt.Errorf("sources[%d]: %w", i, err)
			}
		}
	}
	if s.CertificateConfig != nil {
		if err := s.CertificateConfig.validate(); err != nil {
			return fmt.Errorf("certificate_config: %w", err)
		}
	}
	return nil
}

func (s *AliCloudCdnDomainSpecInput) applyDefaults() {
	if s.CertificateConfig != nil {
		s.CertificateConfig.applyDefaults()
	}
}

func (s *AliCloudCdnDomainSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	m["region"] = s.Region
	m["domain_name"] = s.DomainName
	m["cdn_type"] = s.CdnType
	if s.Scope != "" {
		m["scope"] = s.Scope
	}
	if len(s.Sources) > 0 {
		items := make([]any, len(s.Sources))
		for i, v := range s.Sources {
			if v != nil {
				items[i] = v.toMap()
			}
		}
		m["sources"] = items
	}
	if s.CertificateConfig != nil {
		m["certificate_config"] = s.CertificateConfig.toMap()
	}
	if s.CheckUrl != "" {
		m["check_url"] = s.CheckUrl
	}
	if s.ResourceGroupId != "" {
		m["resource_group_id"] = s.ResourceGroupId
	}
	if len(s.Tags) > 0 {
		m["tags"] = s.Tags
	}
	return m
}

// AliCloudCdnDomainCertificateConfig configures HTTPS for the CDN domain.
//
//	When provided, the CDN edge nodes serve content over HTTPS using the
//	specified certificate.
type AliCloudCdnDomainCertificateConfigInput struct {
	// Display name of the certificate.
	CertName string `json:"cert_name,omitempty" jsonschema:"Display name of the certificate."`
	// The type of certificate.
	//    - "upload" : upload your own certificate and private key
	//    - "cas"    : use a certificate from Alibaba Cloud Certificate Management Service
	//    - "free"   : use a free DV certificate issued by Alibaba Cloud
	CertType string `json:"cert_type,omitempty" jsonschema:"The type of certificate. - 'upload' : upload your own certificate and private key - 'cas' : use a certificate from Alibaba Cloud Certificate Management Service - 'free' : use a free DV certificate iss..."`
	// Certificate ID from Alibaba Cloud Certificate Management Service.
	//  Required when cert_type is "cas".
	CertId string `json:"cert_id,omitempty" jsonschema:"Certificate ID from Alibaba Cloud Certificate Management Service. Required when cert_type is 'cas'."`
	// The region of the CAS certificate.
	//  Only relevant when cert_type is "cas".
	//  Supports "cn-hangzhou" (domestic) and "ap-southeast-1" (international).
	//  Defaults to "cn-hangzhou" in the provider.
	CertRegion string `json:"cert_region,omitempty" jsonschema:"The region of the CAS certificate. Only relevant when cert_type is 'cas'. Supports 'cn-hangzhou' (domestic) and 'ap-southeast-1' (international). Defaults to 'cn-hangzhou' in the provider."`
	// PEM-encoded certificate content.
	//  Required when cert_type is "upload".
	ServerCertificate string `json:"server_certificate,omitempty" jsonschema:"PEM-encoded certificate content. Required when cert_type is 'upload'."`
	// PEM-encoded private key content.
	//  Required when cert_type is "upload".
	PrivateKey string `json:"private_key,omitempty" jsonschema:"PEM-encoded private key content. Required when cert_type is 'upload'."`
	// Whether HTTPS is enabled on the CDN domain.
	//    - "on"  : HTTPS enabled (default when certificate_config is provided)
	//    - "off" : HTTPS disabled
	ServerCertificateStatus string `json:"server_certificate_status,omitempty" jsonschema:"Whether HTTPS is enabled on the CDN domain. - 'on' : HTTPS enabled (default when certificate_config is provided) - 'off' : HTTPS disabled"`
}

func (s *AliCloudCdnDomainCertificateConfigInput) validate() error {
	return nil
}

func (s *AliCloudCdnDomainCertificateConfigInput) applyDefaults() {
}

func (s *AliCloudCdnDomainCertificateConfigInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.CertName != "" {
		m["cert_name"] = s.CertName
	}
	if s.CertType != "" {
		m["cert_type"] = s.CertType
	}
	if s.CertId != "" {
		m["cert_id"] = s.CertId
	}
	if s.CertRegion != "" {
		m["cert_region"] = s.CertRegion
	}
	if s.ServerCertificate != "" {
		m["server_certificate"] = s.ServerCertificate
	}
	if s.PrivateKey != "" {
		m["private_key"] = s.PrivateKey
	}
	if s.ServerCertificateStatus != "" {
		m["server_certificate_status"] = s.ServerCertificateStatus
	}
	return m
}

// AliCloudCdnDomainSource defines a single origin server for the CDN domain.
type AliCloudCdnDomainSourceInput struct {
	// The type of origin source.
	//    - "ipaddr"  : origin is an IP address
	//    - "domain"  : origin is a domain name
	//    - "oss"     : origin is an Alibaba Cloud OSS bucket
	//    - "common"  : origin is a common source (L2 CDN)
	Type string `json:"type" jsonschema:"required,The type of origin source. - 'ipaddr' : origin is an IP address - 'domain' : origin is a domain name - 'oss' : origin is an Alibaba Cloud OSS bucket - 'common' : origin is a common source (L2 CDN)"`
	// The address of the origin server.
	//  For "ipaddr": an IP address (e.g., "1.2.3.4").
	//  For "domain": a domain name (e.g., "origin.example.com").
	//  For "oss": the OSS bucket domain (e.g., "my-bucket.oss-cn-hangzhou.aliyuncs.com").
	//  Each source's content must be unique within the sources list.
	Content string `json:"content" jsonschema:"required,The address of the origin server. For 'ipaddr': an IP address (e.g.; '1.2.3.4'). For 'domain': a domain name (e.g.; 'origin.example.com'). For 'oss': the OSS bucket domain (e.g.; 'my-bucket.oss-cn-han..."`
	// The port number for origin requests.
	//  Typically 80 for HTTP or 443 for HTTPS.
	//  If omitted, defaults to 80.
	Port int32 `json:"port,omitempty" jsonschema:"The port number for origin requests. Typically 80 for HTTP or 443 for HTTPS. If omitted; defaults to 80."`
	// Priority of this origin source. Lower values indicate higher priority.
	//  Valid range: 0-100. If omitted, defaults to 20.
	//  Use 20 for primary sources and 30 for standby sources.
	Priority int32 `json:"priority,omitempty" jsonschema:"Priority of this origin source. Lower values indicate higher priority. Valid range: 0-100. If omitted; defaults to 20. Use 20 for primary sources and 30 for standby sources."`
	// Weight of this origin source for load balancing across multiple origins.
	//  Valid range: 0-100. If omitted, defaults to 10.
	//  Only effective when multiple sources share the same priority.
	Weight int32 `json:"weight,omitempty" jsonschema:"Weight of this origin source for load balancing across multiple origins. Valid range: 0-100. If omitted; defaults to 10. Only effective when multiple sources share the same priority."`
}

func (s *AliCloudCdnDomainSourceInput) validate() error {
	if s.Type == "" {
		return fmt.Errorf("type is required")
	}
	if s.Content == "" {
		return fmt.Errorf("content is required")
	}
	return nil
}

func (s *AliCloudCdnDomainSourceInput) applyDefaults() {
}

func (s *AliCloudCdnDomainSourceInput) toMap() map[string]any {
	m := make(map[string]any)
	m["type"] = s.Type
	m["content"] = s.Content
	if s.Port != 0 {
		m["port"] = s.Port
	}
	if s.Priority != 0 {
		m["priority"] = s.Priority
	}
	if s.Weight != 0 {
		m["weight"] = s.Weight
	}
	return m
}

// ParseAliCloudCdnDomain validates and normalizes a AliCloudCdnDomain cloud_object.
func ParseAliCloudCdnDomain(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "ali-cloud.openmcf.org/v1", "AliCloudCdnDomain"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec AliCloudCdnDomainSpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
