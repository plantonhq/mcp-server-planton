// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-27T00:55:48+05:30

package alicloud

import (
	"encoding/json"
	"fmt"

	"github.com/plantonhq/mcp-server-planton/internal/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// alicloud-private-dns-zone
type AliCloudPrivateDnsZoneSpecInput struct {
	// Alibaba Cloud region for provider initialization.
	//  Private Zone is a global service, but the provider requires a region.
	//  Examples: "cn-hangzhou", "cn-shanghai", "us-west-1", "ap-southeast-1".
	Region string `json:"region" jsonschema:"required,Alibaba Cloud region for provider initialization. Private Zone is a global service; but the provider requires a region. Examples: 'cn-hangzhou'; 'cn-shanghai'; 'us-west-1'; 'ap-southeast-1'."`
	// The private zone name (e.g., "internal.example.com", "db.corp").
	//  This is the DNS suffix that records in the zone are created under.
	//  Cannot be changed after creation (ForceNew).
	ZoneName string `json:"zone_name" jsonschema:"required,The private zone name (e.g.; 'internal.example.com'; 'db.corp'). This is the DNS suffix that records in the zone are created under. Cannot be changed after creation (ForceNew)."`
	// Remark or description for the zone.
	//  Visible in the Private Zone console; useful for noting the zone's purpose.
	Remark string `json:"remark,omitempty" jsonschema:"Remark or description for the zone. Visible in the Private Zone console; useful for noting the zone's purpose."`
	// Alibaba Cloud resource group ID for access control and cost attribution.
	//  If omitted, the zone is placed in the account's default resource group.
	//  Cannot be changed after creation (ForceNew).
	ResourceGroupId string `json:"resource_group_id,omitempty" jsonschema:"Alibaba Cloud resource group ID for access control and cost attribution. If omitted; the zone is placed in the account's default resource group. Cannot be changed after creation (ForceNew)."`
	// VPCs to attach this private zone to. The zone will resolve DNS queries
	//  only within attached VPCs. At least one VPC attachment is required.
	//
	//  Cross-region attachments are supported: set region_id on the attachment
	//  to attach a VPC in a different region than spec.region.
	VpcAttachments []*AliCloudPrivateDnsZoneVpcAttachmentInput `json:"vpc_attachments,omitempty" jsonschema:"VPCs to attach this private zone to. The zone will resolve DNS queries only within attached VPCs. At least one VPC attachment is required. Cross-region attachments are supported: set region_id on the ..."`
	// DNS records within the private zone.
	//  Each record maps a resource record name (rr) to a value (IP, hostname, etc.)
	//  that is resolvable only within the attached VPCs.
	Records []*AliCloudPrivateDnsZoneRecordInput `json:"records,omitempty" jsonschema:"DNS records within the private zone. Each record maps a resource record name (rr) to a value (IP; hostname; etc.) that is resolvable only within the attached VPCs."`
	// Tags to apply to the private zone.
	Tags map[string]string `json:"tags,omitempty" jsonschema:"Tags to apply to the private zone."`
}

func (s *AliCloudPrivateDnsZoneSpecInput) validate() error {
	if s.Region == "" {
		return fmt.Errorf("region is required")
	}
	if s.ZoneName == "" {
		return fmt.Errorf("zone_name is required")
	}
	if len(s.VpcAttachments) < 1 {
		return fmt.Errorf("vpc_attachments requires at least 1 items, got %d", len(s.VpcAttachments))
	}
	for i, v := range s.VpcAttachments {
		if v != nil {
			if err := v.validate(); err != nil {
				return fmt.Errorf("vpc_attachments[%d]: %w", i, err)
			}
		}
	}
	for i, v := range s.Records {
		if v != nil {
			if err := v.validate(); err != nil {
				return fmt.Errorf("records[%d]: %w", i, err)
			}
		}
	}
	return nil
}

func (s *AliCloudPrivateDnsZoneSpecInput) applyDefaults() {
}

func (s *AliCloudPrivateDnsZoneSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	m["region"] = s.Region
	m["zone_name"] = s.ZoneName
	if s.Remark != "" {
		m["remark"] = s.Remark
	}
	if s.ResourceGroupId != "" {
		m["resource_group_id"] = s.ResourceGroupId
	}
	if len(s.VpcAttachments) > 0 {
		items := make([]any, len(s.VpcAttachments))
		for i, v := range s.VpcAttachments {
			if v != nil {
				items[i] = v.toMap()
			}
		}
		m["vpc_attachments"] = items
	}
	if len(s.Records) > 0 {
		items := make([]any, len(s.Records))
		for i, v := range s.Records {
			if v != nil {
				items[i] = v.toMap()
			}
		}
		m["records"] = items
	}
	if len(s.Tags) > 0 {
		m["tags"] = s.Tags
	}
	return m
}

// AliCloudPrivateDnsZoneRecord defines a DNS record within the private zone.
//
//	Supported record types for Private Zone: A, CNAME, MX, PTR, SRV, TXT.
//	Note: AAAA and NS are not supported in Alibaba Cloud Private Zone
//	(unlike public Alidns which supports a broader set of types).
type AliCloudPrivateDnsZoneRecordInput struct {
	// Resource record name -- the hostname part under the zone.
	//  Examples: "db" resolves as "db.internal.example.com" if zone is
	//  "internal.example.com"; "@" for the zone apex.
	Rr string `json:"rr" jsonschema:"required,Resource record name -- the hostname part under the zone. Examples: 'db' resolves as 'db.internal.example.com' if zone is 'internal.example.com'; '@' for the zone apex."`
	// DNS record type. Must be a type supported by Private Zone.
	Type string `json:"type" jsonschema:"required,DNS record type. Must be a type supported by Private Zone."`
	// Record value. Interpretation depends on the record type:
	//    A     -> IPv4 address (e.g., "10.0.1.100")
	//    CNAME -> target hostname (e.g., "db-master.internal.example.com")
	//    MX    -> mail server hostname (e.g., "mail.internal.example.com")
	//    PTR   -> pointer hostname
	//    SRV   -> priority weight po...
	Value string `json:"value" jsonschema:"required,Record value. Interpretation depends on the record type: A -> IPv4 address (e.g.; '10.0.1.100') CNAME -> target hostname (e.g.; 'db-master.internal.example.com') MX -> mail server hostname (e.g.; 'mai..."`
	// Time-to-live in seconds. Controls how long VPC resolvers cache this record.
	//  Default: 60.
	Ttl int32 `json:"ttl,omitempty" jsonschema:"Time-to-live in seconds. Controls how long VPC resolvers cache this record. Default: 60."`
	// Priority for MX records. Ignored for other record types.
	//  Range: 1 (highest priority) to 99 (lowest priority). Default: 1.
	Priority int32 `json:"priority,omitempty" jsonschema:"Priority for MX records. Ignored for other record types. Range: 1 (highest priority) to 99 (lowest priority). Default: 1."`
	// Remark or description for the record.
	Remark string `json:"remark,omitempty" jsonschema:"Remark or description for the record."`
}

func (s *AliCloudPrivateDnsZoneRecordInput) validate() error {
	if s.Rr == "" {
		return fmt.Errorf("rr is required")
	}
	if s.Type == "" {
		return fmt.Errorf("type is required")
	}
	if s.Value == "" {
		return fmt.Errorf("value is required")
	}
	return nil
}

func (s *AliCloudPrivateDnsZoneRecordInput) applyDefaults() {
}

func (s *AliCloudPrivateDnsZoneRecordInput) toMap() map[string]any {
	m := make(map[string]any)
	m["rr"] = s.Rr
	m["type"] = s.Type
	m["value"] = s.Value
	if s.Ttl != 0 {
		m["ttl"] = s.Ttl
	}
	if s.Priority != 0 {
		m["priority"] = s.Priority
	}
	if s.Remark != "" {
		m["remark"] = s.Remark
	}
	return m
}

// AliCloudPrivateDnsZoneVpcAttachment defines a VPC to attach to the private zone.
//
//	Once attached, resources in the VPC can resolve records in this zone.
type AliCloudPrivateDnsZoneVpcAttachmentInput struct {
	// VPC ID to attach. References an AliCloudVpc component's output.
	VpcId string `json:"vpc_id" jsonschema:"required,VPC ID to attach. References an AliCloudVpc component's output."`
	// Region of the VPC. Defaults to the spec.region when omitted.
	//  Set this explicitly when attaching a VPC in a different region than
	//  the provider's region (cross-region private zone attachment).
	RegionId string `json:"region_id,omitempty" jsonschema:"Region of the VPC. Defaults to the spec.region when omitted. Set this explicitly when attaching a VPC in a different region than the provider's region (cross-region private zone attachment)."`
}

func (s *AliCloudPrivateDnsZoneVpcAttachmentInput) validate() error {
	if s.VpcId == "" {
		return fmt.Errorf("vpc_id is required")
	}
	return nil
}

func (s *AliCloudPrivateDnsZoneVpcAttachmentInput) applyDefaults() {
}

func (s *AliCloudPrivateDnsZoneVpcAttachmentInput) toMap() map[string]any {
	m := make(map[string]any)
	m["vpc_id"] = s.VpcId
	if s.RegionId != "" {
		m["region_id"] = s.RegionId
	}
	return m
}

// ParseAliCloudPrivateDnsZone validates and normalizes a AliCloudPrivateDnsZone cloud_object.
func ParseAliCloudPrivateDnsZone(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "ali-cloud.openmcf.org/v1", "AliCloudPrivateDnsZone"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec AliCloudPrivateDnsZoneSpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
