// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-26T21:50:49+05:30

package alicloud

import (
	"encoding/json"
	"fmt"

	"github.com/plantoncloud/mcp-server-planton/gen/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// alicloud-dns-record
type AliCloudDnsRecordSpecInput struct {
	// Alibaba Cloud region for provider initialization.
	//  Alidns is a global service, but the provider requires a region.
	//  Examples: "cn-hangzhou", "cn-shanghai", "us-west-1", "ap-southeast-1".
	Region string `json:"region" jsonschema:"required,Alibaba Cloud region for provider initialization. Alidns is a global service; but the provider requires a region. Examples: 'cn-hangzhou'; 'cn-shanghai'; 'us-west-1'; 'ap-southeast-1'."`
	// The parent domain name that this record belongs to.
	//  Must already exist in the Alidns service (e.g., "example.com").
	//  Cannot be changed after creation (ForceNew).
	DomainName string `json:"domain_name" jsonschema:"required,The parent domain name that this record belongs to. Must already exist in the Alidns service (e.g.; 'example.com'). Cannot be changed after creation (ForceNew)."`
	// The host record (subdomain part) of the DNS record.
	//  "rr" stands for "Resource Record" in the Alibaba Cloud API.
	//  Examples: "www", "@" (apex), "*" (wildcard), "mail", "api.v2".
	//  Maximum 253 characters; individual labels up to 63 characters.
	Rr string `json:"rr" jsonschema:"required,The host record (subdomain part) of the DNS record. 'rr' stands for 'Resource Record' in the Alibaba Cloud API. Examples: 'www'; '@' (apex); '*' (wildcard); 'mail'; 'api.v2'. Maximum 253 characters; i..."`
	// DNS record type.
	//  Must be one of the types supported by the Alibaba Cloud Alidns API.
	//  Note: "FORWORD_URL" is the Alibaba Cloud API's actual spelling.
	Type string `json:"type" jsonschema:"required,DNS record type. Must be one of the types supported by the Alibaba Cloud Alidns API. Note: 'FORWORD_URL' is the Alibaba Cloud API's actual spelling."`
	// The record value.
	//  Interpretation depends on the record type:
	//    A       -> IPv4 address (e.g., "1.2.3.4")
	//    AAAA    -> IPv6 address (e.g., "2001:db8::1")
	//    CNAME   -> target domain (e.g., "cdn.example.com"), no trailing dot
	//    MX      -> mail server (e.g., "mx1.example.com"), no trailing dot
	//    T...
	Value string `json:"value" jsonschema:"required,The record value. Interpretation depends on the record type: A -> IPv4 address (e.g.; '1.2.3.4') AAAA -> IPv6 address (e.g.; '2001:db8::1') CNAME -> target domain (e.g.; 'cdn.example.com'); no trailin..."`
	// Time-to-live in seconds. Controls how long resolvers cache this record.
	//  Range depends on the Alidns plan: Free [600-86400], Basic [120-86400],
	//  Standard [60-86400], Ultimate [10-86400], Exclusive [1-86400].
	//  Default: 600.
	Ttl int32 `json:"ttl,omitempty" jsonschema:"Time-to-live in seconds. Controls how long resolvers cache this record. Range depends on the Alidns plan: Free [600-86400]; Basic [120-86400]; Standard [60-86400]; Ultimate [10-86400]; Exclusive [1-86..."`
	// Priority for MX records. Required when type is "MX", ignored otherwise.
	//  Range: 1 (highest priority) to 10 (lowest priority).
	Priority int32 `json:"priority,omitempty" jsonschema:"Priority for MX records. Required when type is 'MX'; ignored otherwise. Range: 1 (highest priority) to 10 (lowest priority)."`
	// DNS resolution line. Controls which ISP or geographic line resolves
	//  this record. Use "default" for standard resolution.
	//  Advanced values include ISP-specific lines (e.g., "telecom", "unicom",
	//  "mobile") and geographic lines for intelligent DNS routing.
	//  Must be "default" when type is "FORWORD_URL"....
	Line string `json:"line,omitempty" jsonschema:"DNS resolution line. Controls which ISP or geographic line resolves this record. Use 'default' for standard resolution. Advanced values include ISP-specific lines (e.g.; 'telecom'; 'unicom'; 'mobile')..."`
	// Record status. "ENABLE" activates the record; "DISABLE" keeps it
	//  in Alidns but stops it from being served in DNS responses.
	//  Useful for temporarily disabling a record without deleting it.
	//  Default: "ENABLE".
	Status string `json:"status,omitempty" jsonschema:"Record status. 'ENABLE' activates the record; 'DISABLE' keeps it in Alidns but stops it from being served in DNS responses. Useful for temporarily disabling a record without deleting it. Default: 'ENA..."`
	// Remark or description for the record.
	//  Visible in the Alidns console; useful for noting the record's purpose.
	Remark string `json:"remark,omitempty" jsonschema:"Remark or description for the record. Visible in the Alidns console; useful for noting the record's purpose."`
}

func (s *AliCloudDnsRecordSpecInput) validate() error {
	if s.Region == "" {
		return fmt.Errorf("region is required")
	}
	if s.DomainName == "" {
		return fmt.Errorf("domain_name is required")
	}
	if s.Rr == "" {
		return fmt.Errorf("rr is required")
	}
	if s.Type == "" {
		return fmt.Errorf("type is required")
	}
	if s.Value == "" {
		return fmt.Errorf("value is required")
	}
	return nil
}

func (s *AliCloudDnsRecordSpecInput) applyDefaults() {
}

func (s *AliCloudDnsRecordSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	m["region"] = s.Region
	m["domain_name"] = s.DomainName
	m["rr"] = s.Rr
	m["type"] = s.Type
	m["value"] = s.Value
	if s.Ttl != 0 {
		m["ttl"] = s.Ttl
	}
	if s.Priority != 0 {
		m["priority"] = s.Priority
	}
	if s.Line != "" {
		m["line"] = s.Line
	}
	if s.Status != "" {
		m["status"] = s.Status
	}
	if s.Remark != "" {
		m["remark"] = s.Remark
	}
	return m
}

// ParseAliCloudDnsRecord validates and normalizes a AliCloudDnsRecord cloud_object.
func ParseAliCloudDnsRecord(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "ali-cloud.openmcf.org/v1", "AliCloudDnsRecord"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec AliCloudDnsRecordSpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
