// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-26T22:01:03+05:30

package alicloud

import (
	"encoding/json"
	"fmt"

	"github.com/plantoncloud/mcp-server-planton/internal/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// alicloud-vpc
type AliCloudVpcSpecInput struct {
	// Alibaba Cloud region where the VPC will be created.
	//  Examples: "cn-hangzhou", "cn-shanghai", "us-west-1", "ap-southeast-1".
	Region string `json:"region" jsonschema:"required,Alibaba Cloud region where the VPC will be created. Examples: 'cn-hangzhou'; 'cn-shanghai'; 'us-west-1'; 'ap-southeast-1'."`
	// VPC name. 1-128 characters; cannot start with http:// or https://.
	//  Maps to the provider field `vpc_name`.
	VpcName string `json:"vpc_name" jsonschema:"required,VPC name. 1-128 characters; cannot start with http:// or https://. Maps to the provider field 'vpc_name'."`
	// Primary IPv4 CIDR block for the VPC.
	//  Must be a valid private CIDR in one of the following ranges:
	//    10.0.0.0/8   - 10.255.255.255
	//    172.16.0.0/12 - 172.31.255.255
	//    192.168.0.0/16 - 192.168.255.255
	//  Mask length: 8-28.
	//  Example: "10.0.0.0/8", "172.16.0.0/12", "192.168.0.0/16"
	CidrBlock string `json:"cidr_block" jsonschema:"required,Primary IPv4 CIDR block for the VPC. Must be a valid private CIDR in one of the following ranges: 10.0.0.0/8 - 10.255.255.255 172.16.0.0/12 - 172.31.255.255 192.168.0.0/16 - 192.168.255.255 Mask lengt..."`
	// Human-readable description of the VPC.
	//  1-256 characters; cannot start with http:// or https://.
	Description string `json:"description,omitempty" jsonschema:"Human-readable description of the VPC. 1-256 characters; cannot start with http:// or https://."`
	// Enable IPv6 for this VPC.
	//  When enabled, Alibaba Cloud allocates an IPv6 CIDR block (/56) to the VPC.
	//  VSwitches within this VPC can then be assigned IPv6 CIDR blocks.
	//  Default: false
	EnableIpv6 bool `json:"enable_ipv6,omitempty" jsonschema:"Enable IPv6 for this VPC. When enabled; Alibaba Cloud allocates an IPv6 CIDR block (/56) to the VPC. VSwitches within this VPC can then be assigned IPv6 CIDR blocks. Default: false"`
	// Alibaba Cloud resource group ID for organizational grouping (per DD05).
	//  If omitted, the VPC is placed in the account's default resource group.
	ResourceGroupId string `json:"resource_group_id,omitempty" jsonschema:"Alibaba Cloud resource group ID for organizational grouping (per DD05). If omitted; the VPC is placed in the account's default resource group."`
	// Tags to apply to the VPC.
	Tags map[string]string `json:"tags,omitempty" jsonschema:"Tags to apply to the VPC."`
}

func (s *AliCloudVpcSpecInput) validate() error {
	if s.Region == "" {
		return fmt.Errorf("region is required")
	}
	if s.VpcName == "" {
		return fmt.Errorf("vpc_name is required")
	}
	if s.CidrBlock == "" {
		return fmt.Errorf("cidr_block is required")
	}
	return nil
}

func (s *AliCloudVpcSpecInput) applyDefaults() {
}

func (s *AliCloudVpcSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	m["region"] = s.Region
	m["vpc_name"] = s.VpcName
	m["cidr_block"] = s.CidrBlock
	if s.Description != "" {
		m["description"] = s.Description
	}
	if s.EnableIpv6 {
		m["enable_ipv6"] = s.EnableIpv6
	}
	if s.ResourceGroupId != "" {
		m["resource_group_id"] = s.ResourceGroupId
	}
	if len(s.Tags) > 0 {
		m["tags"] = s.Tags
	}
	return m
}

// ParseAliCloudVpc validates and normalizes a AliCloudVpc cloud_object.
func ParseAliCloudVpc(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "ali-cloud.openmcf.org/v1", "AliCloudVpc"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec AliCloudVpcSpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
