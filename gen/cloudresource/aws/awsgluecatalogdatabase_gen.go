// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-27T00:55:48+05:30

package aws

import (
	"encoding/json"
	"fmt"

	"github.com/plantonhq/mcp-server-planton/internal/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// AwsGlueCatalogDatabase is the Kubernetes-style resource envelope for an AWS
//
//	Glue Data Catalog database.
type AwsGlueCatalogDatabaseSpecInput struct {
	// The AWS region where the resource will be created.
	//  Example: "us-west-2", "eu-west-1"
	Region string `json:"region,omitempty" jsonschema:"The AWS region where the resource will be created. Example: 'us-west-2'; 'eu-west-1'"`
	// Human-readable description of the database. Helps teams understand the
	//  purpose and contents of this catalog namespace.
	//
	//  Maximum 2048 characters (enforced by the AWS API).
	//
	//  Examples:
	//  - "Sales analytics data lake â€” raw and curated tables from the sales pipeline"
	//  - "Clickstream events from web a...
	Description string `json:"description,omitempty" jsonschema:"Human-readable description of the database. Helps teams understand the purpose and contents of this catalog namespace. Maximum 2048 characters (enforced by the AWS API). Examples: - 'Sales analytics d..."`
	// Default S3 URI for tables created in this database. When a Glue Crawler or
	//  CREATE TABLE statement does not specify a location, this path is used as the
	//  base directory.
	//
	//  Format: "s3://bucket-name/optional-prefix/"
	//
	//  When omitted, each table must specify its own storage location explicitly.
	//  Settin...
	LocationUri string `json:"location_uri,omitempty" jsonschema:"Default S3 URI for tables created in this database. When a Glue Crawler or CREATE TABLE statement does not specify a location; this path is used as the base directory. Format: 's3://bucket-name/option..."`
}

func (s *AwsGlueCatalogDatabaseSpecInput) validate() error {
	return nil
}

func (s *AwsGlueCatalogDatabaseSpecInput) applyDefaults() {
}

func (s *AwsGlueCatalogDatabaseSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.Region != "" {
		m["region"] = s.Region
	}
	if s.Description != "" {
		m["description"] = s.Description
	}
	if s.LocationUri != "" {
		m["location_uri"] = s.LocationUri
	}
	return m
}

// ParseAwsGlueCatalogDatabase validates and normalizes a AwsGlueCatalogDatabase cloud_object.
func ParseAwsGlueCatalogDatabase(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "aws.openmcf.org/v1", "AwsGlueCatalogDatabase"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec AwsGlueCatalogDatabaseSpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
