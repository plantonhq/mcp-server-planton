// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-26T22:50:56+05:30

package aws

import (
	"encoding/json"
	"fmt"

	"github.com/plantoncloud/mcp-server-planton/internal/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// AwsCognitoIdentityProvider represents an external identity provider (social,
//
//	OIDC, or SAML) federated into an Amazon Cognito User Pool. This is a child
//	resource of AwsCognitoUserPool â€” the pool must exist before creating
//	identity providers.
//
//	Supported provider types: Google, Facebook, Login with Amazon, Sign in with
//	Apple, generic OIDC, and SAML 2.0.
type AwsCognitoIdentityProviderSpecInput struct {
	// The AWS region where the resource will be created.
	//  Example: "us-west-2", "eu-west-1"
	Region string `json:"region,omitempty" jsonschema:"The AWS region where the resource will be created. Example: 'us-west-2'; 'eu-west-1'"`
	// The ID of the Cognito User Pool to attach this identity provider to.
	//  Format: "{region}_{poolId}" (e.g., "us-east-1_Ab1Cd2EfG").
	//
	//  This field is ForceNew: changing it requires replacing the identity provider.
	UserPoolId string `json:"user_pool_id" jsonschema:"required,The ID of the Cognito User Pool to attach this identity provider to. Format: '{region}_{poolId}' (e.g.; 'us-east-1_Ab1Cd2EfG'). This field is ForceNew: changing it requires replacing the identity prov..."`
	// Display name for this identity provider within the User Pool. Must be
	//  unique within the pool. Referenced by User Pool Clients in their
	//  `supported_identity_providers` list.
	//
	//  Examples: "Google", "CorpOkta", "AzureAD-SAML"
	//
	//  1-32 UTF-8 characters. This field is ForceNew.
	ProviderName string `json:"provider_name,omitempty" jsonschema:"Display name for this identity provider within the User Pool. Must be unique within the pool. Referenced by User Pool Clients in their 'supported_identity_providers' list. Examples: 'Google'; 'CorpOkt..."`
	// The type of identity provider. Determines which provider configuration
	//  field to populate (google, facebook, login_with_amazon, sign_in_with_apple,
	//  oidc, or saml).
	//
	//  This field is ForceNew: changing it requires replacing the identity provider.
	ProviderType string `json:"provider_type,omitempty" jsonschema:"enum=Google|Facebook|LoginWithAmazon|SignInWithApple|OIDC|SAML,The type of identity provider. Determines which provider configuration field to populate (google; facebook; login_with_amazon; sign_in_with_apple; oidc; or saml). This field is ForceNew: changing it r..."`
	// Google OAuth 2.0 configuration. Set when provider_type is Google.
	Google *AwsCognitoIdpGoogleConfigInput `json:"google,omitempty" jsonschema:"Google OAuth 2.0 configuration. Set when provider_type is Google."`
	// Facebook Login configuration. Set when provider_type is Facebook.
	Facebook *AwsCognitoIdpFacebookConfigInput `json:"facebook,omitempty" jsonschema:"Facebook Login configuration. Set when provider_type is Facebook."`
	// Login with Amazon configuration. Set when provider_type is LoginWithAmazon.
	LoginWithAmazon *AwsCognitoIdpLoginWithAmazonConfigInput `json:"login_with_amazon,omitempty" jsonschema:"Login with Amazon configuration. Set when provider_type is LoginWithAmazon."`
	// Sign in with Apple configuration. Set when provider_type is SignInWithApple.
	SignInWithApple *AwsCognitoIdpSignInWithAppleConfigInput `json:"sign_in_with_apple,omitempty" jsonschema:"Sign in with Apple configuration. Set when provider_type is SignInWithApple."`
	// Generic OIDC configuration. Set when provider_type is OIDC.
	Oidc *AwsCognitoIdpOidcConfigInput `json:"oidc,omitempty" jsonschema:"Generic OIDC configuration. Set when provider_type is OIDC."`
	// SAML 2.0 configuration. Set when provider_type is SAML.
	Saml *AwsCognitoIdpSamlConfigInput `json:"saml,omitempty" jsonschema:"SAML 2.0 configuration. Set when provider_type is SAML."`
	// Maps identity provider attributes to Cognito User Pool attributes.
	//  Keys are Cognito user pool attribute names (e.g., "email", "username",
	//  "given_name"). Values are provider-specific attribute names or paths
	//  (e.g., "sub", "email").
	//
	//  When omitted, AWS applies default mappings based on the provider...
	AttributeMapping map[string]string `json:"attribute_mapping,omitempty" jsonschema:"Maps identity provider attributes to Cognito User Pool attributes. Keys are Cognito user pool attribute names (e.g.; 'email'; 'username'; 'given_name'). Values are provider-specific attribute names or..."`
	// Alternative identifiers for this identity provider. These can be used
	//  in the login endpoint's `idp_identifier` parameter to redirect to this
	//  provider without exposing the provider_name.
	//
	//  Maximum 50 identifiers, each 1-40 characters.
	IdpIdentifiers []string `json:"idp_identifiers,omitempty" jsonschema:"Alternative identifiers for this identity provider. These can be used in the login endpoint's 'idp_identifier' parameter to redirect to this provider without exposing the provider_name. Maximum 50 ide..."`
}

func (s *AwsCognitoIdentityProviderSpecInput) validate() error {
	if s.UserPoolId == "" {
		return fmt.Errorf("user_pool_id is required")
	}
	switch s.ProviderType {
	case "", "Google", "Facebook", "LoginWithAmazon", "SignInWithApple", "OIDC", "SAML":
	default:
		return fmt.Errorf("invalid provider_type: %q", s.ProviderType)
	}
	if s.Google != nil {
		if err := s.Google.validate(); err != nil {
			return fmt.Errorf("google: %w", err)
		}
	}
	if s.Facebook != nil {
		if err := s.Facebook.validate(); err != nil {
			return fmt.Errorf("facebook: %w", err)
		}
	}
	if s.LoginWithAmazon != nil {
		if err := s.LoginWithAmazon.validate(); err != nil {
			return fmt.Errorf("login_with_amazon: %w", err)
		}
	}
	if s.SignInWithApple != nil {
		if err := s.SignInWithApple.validate(); err != nil {
			return fmt.Errorf("sign_in_with_apple: %w", err)
		}
	}
	if s.Oidc != nil {
		if err := s.Oidc.validate(); err != nil {
			return fmt.Errorf("oidc: %w", err)
		}
	}
	if s.Saml != nil {
		if err := s.Saml.validate(); err != nil {
			return fmt.Errorf("saml: %w", err)
		}
	}
	return nil
}

func (s *AwsCognitoIdentityProviderSpecInput) applyDefaults() {
	if s.Google != nil {
		s.Google.applyDefaults()
	}
	if s.Facebook != nil {
		s.Facebook.applyDefaults()
	}
	if s.LoginWithAmazon != nil {
		s.LoginWithAmazon.applyDefaults()
	}
	if s.SignInWithApple != nil {
		s.SignInWithApple.applyDefaults()
	}
	if s.Oidc != nil {
		s.Oidc.applyDefaults()
	}
	if s.Saml != nil {
		s.Saml.applyDefaults()
	}
}

func (s *AwsCognitoIdentityProviderSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.Region != "" {
		m["region"] = s.Region
	}
	m["user_pool_id"] = s.UserPoolId
	if s.ProviderName != "" {
		m["provider_name"] = s.ProviderName
	}
	if s.ProviderType != "" {
		m["provider_type"] = s.ProviderType
	}
	if s.Google != nil {
		m["google"] = s.Google.toMap()
	}
	if s.Facebook != nil {
		m["facebook"] = s.Facebook.toMap()
	}
	if s.LoginWithAmazon != nil {
		m["login_with_amazon"] = s.LoginWithAmazon.toMap()
	}
	if s.SignInWithApple != nil {
		m["sign_in_with_apple"] = s.SignInWithApple.toMap()
	}
	if s.Oidc != nil {
		m["oidc"] = s.Oidc.toMap()
	}
	if s.Saml != nil {
		m["saml"] = s.Saml.toMap()
	}
	if len(s.AttributeMapping) > 0 {
		m["attribute_mapping"] = s.AttributeMapping
	}
	if len(s.IdpIdentifiers) > 0 {
		m["idp_identifiers"] = s.IdpIdentifiers
	}
	return m
}

// AwsCognitoIdpFacebookConfig holds the OAuth 2.0 configuration for a Facebook
//
//	Login identity provider.
type AwsCognitoIdpFacebookConfigInput struct {
	// Facebook App ID from the Facebook Developer Portal.
	ClientId string `json:"client_id,omitempty" jsonschema:"Facebook App ID from the Facebook Developer Portal."`
	// Facebook App Secret from the Facebook Developer Portal.
	ClientSecret string `json:"client_secret,omitempty" jsonschema:"Facebook App Secret from the Facebook Developer Portal."`
	// Comma-separated OAuth scopes (e.g., "email,public_profile").
	//  Note: Facebook uses comma-separated scopes, unlike other providers
	//  which use space-separated.
	AuthorizeScopes string `json:"authorize_scopes,omitempty" jsonschema:"Comma-separated OAuth scopes (e.g.; 'email;public_profile'). Note: Facebook uses comma-separated scopes; unlike other providers which use space-separated."`
	// Facebook Graph API version (e.g., "v17.0"). When omitted, Cognito uses
	//  the latest version it supports.
	ApiVersion string `json:"api_version,omitempty" jsonschema:"Facebook Graph API version (e.g.; 'v17.0'). When omitted; Cognito uses the latest version it supports."`
}

func (s *AwsCognitoIdpFacebookConfigInput) validate() error {
	return nil
}

func (s *AwsCognitoIdpFacebookConfigInput) applyDefaults() {
}

func (s *AwsCognitoIdpFacebookConfigInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.ClientId != "" {
		m["client_id"] = s.ClientId
	}
	if s.ClientSecret != "" {
		m["client_secret"] = s.ClientSecret
	}
	if s.AuthorizeScopes != "" {
		m["authorize_scopes"] = s.AuthorizeScopes
	}
	if s.ApiVersion != "" {
		m["api_version"] = s.ApiVersion
	}
	return m
}

// AwsCognitoIdpGoogleConfig holds the OAuth 2.0 configuration for a Google
//
//	identity provider. Cognito auto-discovers authorize_url, token_url, and
//	oidc_issuer from Google's well-known endpoints.
type AwsCognitoIdpGoogleConfigInput struct {
	// Google OAuth 2.0 client ID from the Google Cloud Console.
	ClientId string `json:"client_id,omitempty" jsonschema:"Google OAuth 2.0 client ID from the Google Cloud Console."`
	// Google OAuth 2.0 client secret from the Google Cloud Console.
	ClientSecret string `json:"client_secret,omitempty" jsonschema:"Google OAuth 2.0 client secret from the Google Cloud Console."`
	// Space-separated OAuth scopes (e.g., "email profile openid").
	AuthorizeScopes string `json:"authorize_scopes,omitempty" jsonschema:"Space-separated OAuth scopes (e.g.; 'email profile openid')."`
}

func (s *AwsCognitoIdpGoogleConfigInput) validate() error {
	return nil
}

func (s *AwsCognitoIdpGoogleConfigInput) applyDefaults() {
}

func (s *AwsCognitoIdpGoogleConfigInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.ClientId != "" {
		m["client_id"] = s.ClientId
	}
	if s.ClientSecret != "" {
		m["client_secret"] = s.ClientSecret
	}
	if s.AuthorizeScopes != "" {
		m["authorize_scopes"] = s.AuthorizeScopes
	}
	return m
}

// AwsCognitoIdpLoginWithAmazonConfig holds the OAuth 2.0 configuration for a
//
//	Login with Amazon identity provider.
type AwsCognitoIdpLoginWithAmazonConfigInput struct {
	// Login with Amazon client ID from the Amazon Developer Console.
	ClientId string `json:"client_id,omitempty" jsonschema:"Login with Amazon client ID from the Amazon Developer Console."`
	// Login with Amazon client secret from the Amazon Developer Console.
	ClientSecret string `json:"client_secret,omitempty" jsonschema:"Login with Amazon client secret from the Amazon Developer Console."`
	// Space-separated OAuth scopes (e.g., "profile postal_code").
	AuthorizeScopes string `json:"authorize_scopes,omitempty" jsonschema:"Space-separated OAuth scopes (e.g.; 'profile postal_code')."`
}

func (s *AwsCognitoIdpLoginWithAmazonConfigInput) validate() error {
	return nil
}

func (s *AwsCognitoIdpLoginWithAmazonConfigInput) applyDefaults() {
}

func (s *AwsCognitoIdpLoginWithAmazonConfigInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.ClientId != "" {
		m["client_id"] = s.ClientId
	}
	if s.ClientSecret != "" {
		m["client_secret"] = s.ClientSecret
	}
	if s.AuthorizeScopes != "" {
		m["authorize_scopes"] = s.AuthorizeScopes
	}
	return m
}

// AwsCognitoIdpOidcConfig holds the configuration for a generic OpenID Connect
//
//	identity provider. Cognito auto-discovers endpoint URLs from the issuer's
//	.well-known/openid-configuration when only oidc_issuer is provided.
type AwsCognitoIdpOidcConfigInput struct {
	// OIDC client ID registered with the identity provider.
	ClientId string `json:"client_id,omitempty" jsonschema:"OIDC client ID registered with the identity provider."`
	// OIDC issuer URL (e.g., "https://login.microsoftonline.com/{tenant}/v2.0").
	//  Cognito auto-discovers authorize, token, userinfo, and JWKS endpoints from
	//  the issuer's .well-known/openid-configuration document.
	OidcIssuer string `json:"oidc_issuer,omitempty" jsonschema:"OIDC issuer URL (e.g.; 'https://login.microsoftonline.com/{tenant}/v2.0'). Cognito auto-discovers authorize; token; userinfo; and JWKS endpoints from the issuer's .well-known/openid-configuration docu..."`
	// Space-separated OAuth/OIDC scopes (e.g., "openid email profile").
	AuthorizeScopes string `json:"authorize_scopes,omitempty" jsonschema:"Space-separated OAuth/OIDC scopes (e.g.; 'openid email profile')."`
	// OIDC client secret. Optional for public clients that use PKCE.
	ClientSecret string `json:"client_secret,omitempty" jsonschema:"OIDC client secret. Optional for public clients that use PKCE."`
	// HTTP method for the userinfo endpoint: "GET" or "POST".
	//  When omitted, Cognito defaults to "GET".
	AttributesRequestMethod string `json:"attributes_request_method,omitempty" jsonschema:"HTTP method for the userinfo endpoint: 'GET' or 'POST'. When omitted; Cognito defaults to 'GET'."`
	// Override the auto-discovered authorization endpoint URL.
	AuthorizeUrl string `json:"authorize_url,omitempty" jsonschema:"Override the auto-discovered authorization endpoint URL."`
	// Override the auto-discovered token endpoint URL.
	TokenUrl string `json:"token_url,omitempty" jsonschema:"Override the auto-discovered token endpoint URL."`
	// Override the auto-discovered userinfo endpoint URL.
	AttributesUrl string `json:"attributes_url,omitempty" jsonschema:"Override the auto-discovered userinfo endpoint URL."`
	// Override the auto-discovered JWKS endpoint URL.
	JwksUri string `json:"jwks_uri,omitempty" jsonschema:"Override the auto-discovered JWKS endpoint URL."`
}

func (s *AwsCognitoIdpOidcConfigInput) validate() error {
	return nil
}

func (s *AwsCognitoIdpOidcConfigInput) applyDefaults() {
}

func (s *AwsCognitoIdpOidcConfigInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.ClientId != "" {
		m["client_id"] = s.ClientId
	}
	if s.OidcIssuer != "" {
		m["oidc_issuer"] = s.OidcIssuer
	}
	if s.AuthorizeScopes != "" {
		m["authorize_scopes"] = s.AuthorizeScopes
	}
	if s.ClientSecret != "" {
		m["client_secret"] = s.ClientSecret
	}
	if s.AttributesRequestMethod != "" {
		m["attributes_request_method"] = s.AttributesRequestMethod
	}
	if s.AuthorizeUrl != "" {
		m["authorize_url"] = s.AuthorizeUrl
	}
	if s.TokenUrl != "" {
		m["token_url"] = s.TokenUrl
	}
	if s.AttributesUrl != "" {
		m["attributes_url"] = s.AttributesUrl
	}
	if s.JwksUri != "" {
		m["jwks_uri"] = s.JwksUri
	}
	return m
}

// AwsCognitoIdpSamlConfig holds the configuration for a SAML 2.0 federation
//
//	identity provider. Exactly one of metadata_file or metadata_url must be set
//	to provide the IdP's SAML metadata.
type AwsCognitoIdpSamlConfigInput struct {
	// SAML metadata XML content as a string. Use this for inline metadata.
	//  Mutually exclusive with metadata_url.
	MetadataFile string `json:"metadata_file,omitempty" jsonschema:"SAML metadata XML content as a string. Use this for inline metadata. Mutually exclusive with metadata_url."`
	// URL pointing to the IdP's SAML metadata document. Cognito fetches the
	//  metadata from this URL. Mutually exclusive with metadata_file.
	MetadataUrl string `json:"metadata_url,omitempty" jsonschema:"URL pointing to the IdP's SAML metadata document. Cognito fetches the metadata from this URL. Mutually exclusive with metadata_file."`
	// Enable single logout (SLO). When true, Cognito signs the user out of
	//  the SAML IdP when they sign out of the User Pool.
	IdpSignOut bool `json:"idp_sign_out,omitempty" jsonschema:"Enable single logout (SLO). When true; Cognito signs the user out of the SAML IdP when they sign out of the User Pool."`
	// Enable IdP-initiated SSO. When true, the IdP can start the sign-in
	//  flow directly without the user first visiting the Cognito hosted UI.
	IdpInit bool `json:"idp_init,omitempty" jsonschema:"Enable IdP-initiated SSO. When true; the IdP can start the sign-in flow directly without the user first visiting the Cognito hosted UI."`
	// Require encrypted SAML assertions from the IdP.
	EncryptedResponses bool `json:"encrypted_responses,omitempty" jsonschema:"Require encrypted SAML assertions from the IdP."`
	// SAML request signing algorithm (e.g., "rsa-sha256"). When omitted,
	//  Cognito uses the default algorithm.
	RequestSigningAlgorithm string `json:"request_signing_algorithm,omitempty" jsonschema:"SAML request signing algorithm (e.g.; 'rsa-sha256'). When omitted; Cognito uses the default algorithm."`
}

func (s *AwsCognitoIdpSamlConfigInput) validate() error {
	return nil
}

func (s *AwsCognitoIdpSamlConfigInput) applyDefaults() {
}

func (s *AwsCognitoIdpSamlConfigInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.MetadataFile != "" {
		m["metadata_file"] = s.MetadataFile
	}
	if s.MetadataUrl != "" {
		m["metadata_url"] = s.MetadataUrl
	}
	if s.IdpSignOut {
		m["idp_sign_out"] = s.IdpSignOut
	}
	if s.IdpInit {
		m["idp_init"] = s.IdpInit
	}
	if s.EncryptedResponses {
		m["encrypted_responses"] = s.EncryptedResponses
	}
	if s.RequestSigningAlgorithm != "" {
		m["request_signing_algorithm"] = s.RequestSigningAlgorithm
	}
	return m
}

// AwsCognitoIdpSignInWithAppleConfig holds the configuration for a Sign in
//
//	with Apple identity provider. Apple uses a private-key-based authentication
//	model rather than a simple client_secret.
type AwsCognitoIdpSignInWithAppleConfigInput struct {
	// Apple Services ID configured in the Apple Developer Portal.
	ClientId string `json:"client_id,omitempty" jsonschema:"Apple Services ID configured in the Apple Developer Portal."`
	// Apple Developer Team ID (10-character alphanumeric string).
	TeamId string `json:"team_id,omitempty" jsonschema:"Apple Developer Team ID (10-character alphanumeric string)."`
	// Key ID for the Apple private key.
	KeyId string `json:"key_id,omitempty" jsonschema:"Key ID for the Apple private key."`
	// Apple private key in PEM format. Used to generate the client_secret JWT.
	PrivateKey string `json:"private_key,omitempty" jsonschema:"Apple private key in PEM format. Used to generate the client_secret JWT."`
	// Space-separated OAuth scopes (e.g., "email name").
	AuthorizeScopes string `json:"authorize_scopes,omitempty" jsonschema:"Space-separated OAuth scopes (e.g.; 'email name')."`
}

func (s *AwsCognitoIdpSignInWithAppleConfigInput) validate() error {
	return nil
}

func (s *AwsCognitoIdpSignInWithAppleConfigInput) applyDefaults() {
}

func (s *AwsCognitoIdpSignInWithAppleConfigInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.ClientId != "" {
		m["client_id"] = s.ClientId
	}
	if s.TeamId != "" {
		m["team_id"] = s.TeamId
	}
	if s.KeyId != "" {
		m["key_id"] = s.KeyId
	}
	if s.PrivateKey != "" {
		m["private_key"] = s.PrivateKey
	}
	if s.AuthorizeScopes != "" {
		m["authorize_scopes"] = s.AuthorizeScopes
	}
	return m
}

// ParseAwsCognitoIdentityProvider validates and normalizes a AwsCognitoIdentityProvider cloud_object.
func ParseAwsCognitoIdentityProvider(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "aws.openmcf.org/v1", "AwsCognitoIdentityProvider"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec AwsCognitoIdentityProviderSpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
