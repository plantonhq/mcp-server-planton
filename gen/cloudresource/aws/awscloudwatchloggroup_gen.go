// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-27T00:55:48+05:30

package aws

import (
	"encoding/json"
	"fmt"

	"github.com/plantonhq/mcp-server-planton/internal/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// AwsCloudwatchLogGroup represents a CloudWatch Logs log group — a container
//
//	for log streams that share the same retention, monitoring, and access control
//	settings. Log groups are the primary destination for application logs, service
//	logs, and operational data across AWS services.
type AwsCloudwatchLogGroupSpecInput struct {
	// The AWS region where the resource will be created.
	//  Example: "us-west-2", "eu-west-1"
	Region string `json:"region,omitempty" jsonschema:"The AWS region where the resource will be created. Example: 'us-west-2'; 'eu-west-1'"`
	// Number of days to retain log events. After this period, log events are
	//  automatically deleted. Set to 0 (the default) to retain log events
	//  indefinitely — they will never expire.
	//
	//  AWS only accepts specific values for this field. Any value not in the
	//  allowed set will be rejected by the AWS API.
	//
	// ...
	RetentionInDays int32 `json:"retention_in_days,omitempty" jsonschema:"Number of days to retain log events. After this period; log events are automatically deleted. Set to 0 (the default) to retain log events indefinitely — they will never expire. AWS only accepts spec..."`
	// ARN of the KMS key to use for encrypting log data at rest. When omitted,
	//  CloudWatch Logs uses its default server-side encryption (SSE-CWL).
	//
	//  Customer-managed KMS keys provide:
	//  - Key rotation control
	//  - Cross-account access via key policy
	//  - CloudTrail audit trail of log data access
	//  - Compliance ...
	KmsKeyId string `json:"kms_key_id,omitempty" jsonschema:"ARN of the KMS key to use for encrypting log data at rest. When omitted; CloudWatch Logs uses its default server-side encryption (SSE-CWL). Customer-managed KMS keys provide: - Key rotation control - ..."`
	// The class of the log group, which determines pricing, feature availability,
	//  and data durability characteristics.
	//
	//  Valid values:
	//  - "STANDARD" — Full feature set including metric filters, subscription
	//    filters, Logs Insights, and Contributor Insights. Default when omitted.
	//  - "INFREQUENT_ACCESS...
	LogGroupClass string `json:"log_group_class,omitempty" jsonschema:"The class of the log group; which determines pricing; feature availability; and data durability characteristics. Valid values: - 'STANDARD' — Full feature set including metric filters; subscription ..."`
	// When true, the log group is protected from deletion. Any attempt to delete
	//  the log group (including via IaC destroy) will fail until this flag is set
	//  to false. Useful for protecting production log groups from accidental
	//  deletion.
	DeletionProtectionEnabled bool `json:"deletion_protection_enabled,omitempty" jsonschema:"When true; the log group is protected from deletion. Any attempt to delete the log group (including via IaC destroy) will fail until this flag is set to false. Useful for protecting production log gro..."`
}

func (s *AwsCloudwatchLogGroupSpecInput) validate() error {
	return nil
}

func (s *AwsCloudwatchLogGroupSpecInput) applyDefaults() {
}

func (s *AwsCloudwatchLogGroupSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.Region != "" {
		m["region"] = s.Region
	}
	if s.RetentionInDays != 0 {
		m["retention_in_days"] = s.RetentionInDays
	}
	if s.KmsKeyId != "" {
		m["kms_key_id"] = s.KmsKeyId
	}
	if s.LogGroupClass != "" {
		m["log_group_class"] = s.LogGroupClass
	}
	if s.DeletionProtectionEnabled {
		m["deletion_protection_enabled"] = s.DeletionProtectionEnabled
	}
	return m
}

// ParseAwsCloudwatchLogGroup validates and normalizes a AwsCloudwatchLogGroup cloud_object.
func ParseAwsCloudwatchLogGroup(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "aws.openmcf.org/v1", "AwsCloudwatchLogGroup"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec AwsCloudwatchLogGroupSpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
