// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-27T22:24:53+05:30

package gcp

import (
	"encoding/json"
	"fmt"

	"github.com/plantonhq/mcp-server-planton/internal/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// gcp-kms-key-ring
type GcpKmsKeyRingSpecInput struct {
	// The GCP project in which to create this key ring.
	//  Example: "my-prod-project-123"
	ProjectId string `json:"project_id" jsonschema:"required,The GCP project in which to create this key ring. Example: 'my-prod-project-123'"`
	// Name of the key ring in GCP. Immutable after creation.
	//  Must be 1-63 characters: letters (upper or lower), digits, hyphens, or underscores.
	//  This is the GCP resource name, distinct from the OpenMCF metadata.name.
	//  Example: "prod-encryption", "data-keys-us-central1"
	KeyRingName string `json:"key_ring_name" jsonschema:"required,Name of the key ring in GCP. Immutable after creation. Must be 1-63 characters: letters (upper or lower); digits; hyphens; or underscores. This is the GCP resource name; distinct from the OpenMCF meta..."`
	// GCP location (region, multi-region, or "global") where the key ring resides.
	//  Immutable after creation. Choose based on latency, data residency, and
	//  redundancy requirements.
	//
	//  Common values:
	//    Region:       "us-central1", "europe-west1", "asia-east1"
	//    Multi-region: "us", "europe", "asia"
	//    Glob...
	Location string `json:"location" jsonschema:"required,GCP location (region; multi-region; or 'global') where the key ring resides. Immutable after creation. Choose based on latency; data residency; and redundancy requirements. Common values: Region: 'us-..."`
}

func (s *GcpKmsKeyRingSpecInput) validate() error {
	if s.ProjectId == "" {
		return fmt.Errorf("project_id is required")
	}
	if s.KeyRingName == "" {
		return fmt.Errorf("key_ring_name is required")
	}
	if s.Location == "" {
		return fmt.Errorf("location is required")
	}
	return nil
}

func (s *GcpKmsKeyRingSpecInput) applyDefaults() {
}

func (s *GcpKmsKeyRingSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	m["project_id"] = s.ProjectId
	m["key_ring_name"] = s.KeyRingName
	m["location"] = s.Location
	return m
}

// ParseGcpKmsKeyRing validates and normalizes a GcpKmsKeyRing cloud_object.
func ParseGcpKmsKeyRing(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "gcp.openmcf.org/v1", "GcpKmsKeyRing"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec GcpKmsKeyRingSpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
