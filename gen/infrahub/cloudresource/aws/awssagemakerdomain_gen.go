// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-27T22:24:53+05:30

package aws

import (
	"encoding/json"
	"fmt"

	"github.com/plantonhq/mcp-server-planton/internal/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// aws-sagemaker-domain
type AwsSagemakerDomainSpecInput struct {
	// The AWS region where the resource will be created.
	//  Example: "us-west-2", "eu-west-1"
	Region string `json:"region,omitempty" jsonschema:"The AWS region where the resource will be created. Example: 'us-west-2'; 'eu-west-1'"`
	// auth_mode determines how users authenticate to the SageMaker Domain.
	//  "IAM": users authenticate with AWS IAM credentials. Suitable for single-account teams
	//    or programmatic access. Each user's IAM identity determines their permissions.
	//  "SSO": users authenticate via AWS IAM Identity Center (former...
	AuthMode string `json:"auth_mode" jsonschema:"required,auth_mode determines how users authenticate to the SageMaker Domain. 'IAM': users authenticate with AWS IAM credentials. Suitable for single-account teams or programmatic access. Each user's IAM ident..."`
	// vpc_id is the VPC in which the SageMaker Domain is created.
	//  All domain network interfaces (for notebooks, training, and app traffic) are placed
	//  in this VPC. The VPC must have DNS resolution and DNS hostnames enabled.
	//  ForceNew: changing the VPC forces domain replacement.
	VpcId string `json:"vpc_id" jsonschema:"required,vpc_id is the VPC in which the SageMaker Domain is created. All domain network interfaces (for notebooks; training; and app traffic) are placed in this VPC. The VPC must have DNS resolution and DNS ho..."`
	// subnet_ids are the VPC subnets where SageMaker provisions elastic network interfaces
	//  for notebook and training traffic. For high availability, provide subnets in at least
	//  two Availability Zones. Maximum 16 subnets.
	//  ForceNew: changing subnets forces domain replacement.
	SubnetIds []string `json:"subnet_ids,omitempty" jsonschema:"subnet_ids are the VPC subnets where SageMaker provisions elastic network interfaces for notebook and training traffic. For high availability; provide subnets in at least two Availability Zones. Maxim..."`
	// kms_key_id is the KMS key ARN used to encrypt the EFS volume attached to the domain.
	//  Each SageMaker Domain creates a dedicated EFS file system for user home directories.
	//  If omitted, AWS uses the default aws/elasticfilesystem service key.
	//  ForceNew: changing the KMS key forces domain replacement.
	KmsKeyId string `json:"kms_key_id,omitempty" jsonschema:"kms_key_id is the KMS key ARN used to encrypt the EFS volume attached to the domain. Each SageMaker Domain creates a dedicated EFS file system for user home directories. If omitted; AWS uses the defau..."`
	// app_network_access_type controls whether notebook and training traffic can reach the internet.
	//  "PublicInternetOnly" (default): ENIs have internet access via VPC routing.
	//  "VpcOnly": all traffic stays within the VPC; internet access requires a NAT gateway.
	//  "VpcOnly" is recommended for production to...
	AppNetworkAccessType string `json:"app_network_access_type,omitempty" jsonschema:"app_network_access_type controls whether notebook and training traffic can reach the internet. 'PublicInternetOnly' (default): ENIs have internet access via VPC routing. 'VpcOnly': all traffic stays w..."`
	// default_user_settings defines the default configuration inherited by all user profiles
	//  in the domain. These settings control the execution environment, app configurations,
	//  security boundaries, and storage defaults. Individual user profiles can override these
	//  defaults via AwsSagemakerUserProfile (...
	DefaultUserSettings *AwsSagemakerDomainDefaultUserSettingsInput `json:"default_user_settings" jsonschema:"required,default_user_settings defines the default configuration inherited by all user profiles in the domain. These settings control the execution environment; app configurations; security boundaries; and sto..."`
	// domain_security_group_ids are security groups applied at the domain level for
	//  domain-scoped apps and shared resources. These are separate from user-level security
	//  groups (default_user_settings.security_group_ids) and control domain-wide network boundaries.
	//  Maximum 3 security groups. ForceNew: cha...
	DomainSecurityGroupIds []string `json:"domain_security_group_ids,omitempty" jsonschema:"domain_security_group_ids are security groups applied at the domain level for domain-scoped apps and shared resources. These are separate from user-level security groups (default_user_settings.securit..."`
	// docker_settings controls Docker access within the SageMaker Domain.
	//  When enabled, users can build and run custom Docker containers directly in their
	//  notebooks and terminals -- essential for custom training containers, inference
	//  endpoints, and reproducible ML pipelines.
	DockerSettings *AwsSagemakerDomainDockerSettingsInput `json:"docker_settings,omitempty" jsonschema:"docker_settings controls Docker access within the SageMaker Domain. When enabled; users can build and run custom Docker containers directly in their notebooks and terminals -- essential for custom tra..."`
}

func (s *AwsSagemakerDomainSpecInput) validate() error {
	if s.AuthMode == "" {
		return fmt.Errorf("auth_mode is required")
	}
	if s.VpcId == "" {
		return fmt.Errorf("vpc_id is required")
	}
	if len(s.SubnetIds) < 1 {
		return fmt.Errorf("subnet_ids requires at least 1 items, got %d", len(s.SubnetIds))
	}
	if s.DefaultUserSettings == nil {
		return fmt.Errorf("default_user_settings is required")
	}
	if s.DefaultUserSettings != nil {
		if err := s.DefaultUserSettings.validate(); err != nil {
			return fmt.Errorf("default_user_settings: %w", err)
		}
	}
	if s.DockerSettings != nil {
		if err := s.DockerSettings.validate(); err != nil {
			return fmt.Errorf("docker_settings: %w", err)
		}
	}
	return nil
}

func (s *AwsSagemakerDomainSpecInput) applyDefaults() {
	if s.AppNetworkAccessType == "" {
		s.AppNetworkAccessType = "PublicInternetOnly"
	}
	if s.DefaultUserSettings != nil {
		s.DefaultUserSettings.applyDefaults()
	}
	if s.DockerSettings != nil {
		s.DockerSettings.applyDefaults()
	}
}

func (s *AwsSagemakerDomainSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.Region != "" {
		m["region"] = s.Region
	}
	m["auth_mode"] = s.AuthMode
	m["vpc_id"] = s.VpcId
	if len(s.SubnetIds) > 0 {
		m["subnet_ids"] = s.SubnetIds
	}
	if s.KmsKeyId != "" {
		m["kms_key_id"] = s.KmsKeyId
	}
	if s.AppNetworkAccessType != "" {
		m["app_network_access_type"] = s.AppNetworkAccessType
	}
	if s.DefaultUserSettings != nil {
		m["default_user_settings"] = s.DefaultUserSettings.toMap()
	}
	if len(s.DomainSecurityGroupIds) > 0 {
		m["domain_security_group_ids"] = s.DomainSecurityGroupIds
	}
	if s.DockerSettings != nil {
		m["docker_settings"] = s.DockerSettings.toMap()
	}
	return m
}

// AwsSagemakerDomainCodeRepository defines a Git repository automatically cloned into
//
//	JupyterLab on startup, providing immediate access to team code and shared notebooks.
type AwsSagemakerDomainCodeRepositoryInput struct {
	// repository_url is the HTTPS URL of the Git repository to clone.
	//  Must be an HTTPS URL (SSH URLs are not supported by SageMaker).
	//  Examples: "https://github.com/org/ml-notebooks.git"
	//  Maximum length: 1024 characters.
	RepositoryUrl string `json:"repository_url" jsonschema:"required,repository_url is the HTTPS URL of the Git repository to clone. Must be an HTTPS URL (SSH URLs are not supported by SageMaker). Examples: 'https://github.com/org/ml-notebooks.git' Maximum length: 1024..."`
}

func (s *AwsSagemakerDomainCodeRepositoryInput) validate() error {
	if s.RepositoryUrl == "" {
		return fmt.Errorf("repository_url is required")
	}
	return nil
}

func (s *AwsSagemakerDomainCodeRepositoryInput) applyDefaults() {
}

func (s *AwsSagemakerDomainCodeRepositoryInput) toMap() map[string]any {
	m := make(map[string]any)
	m["repository_url"] = s.RepositoryUrl
	return m
}

// AwsSagemakerDomainCustomImage defines a custom Docker image available as a kernel
//
//	in SageMaker Studio. Custom images enable teams to standardize on specific ML framework
//	versions, proprietary libraries, or GPU-optimized environments.
type AwsSagemakerDomainCustomImageInput struct {
	// app_image_config_name is the name of the SageMaker AppImageConfig that defines how
	//  the image is presented to users (kernel specifications, file system configuration).
	//  The AppImageConfig must exist before referencing it here.
	AppImageConfigName string `json:"app_image_config_name" jsonschema:"required,app_image_config_name is the name of the SageMaker AppImageConfig that defines how the image is presented to users (kernel specifications; file system configuration). The AppImageConfig must exist bef..."`
	// image_name is the name of the SageMaker Image resource that contains this container image.
	//  The Image resource must exist before referencing it here.
	ImageName string `json:"image_name" jsonschema:"required,image_name is the name of the SageMaker Image resource that contains this container image. The Image resource must exist before referencing it here."`
	// image_version_number pins to a specific version of the image.
	//  If omitted, the latest available version is used.
	ImageVersionNumber int32 `json:"image_version_number,omitempty" jsonschema:"image_version_number pins to a specific version of the image. If omitted; the latest available version is used."`
}

func (s *AwsSagemakerDomainCustomImageInput) validate() error {
	if s.AppImageConfigName == "" {
		return fmt.Errorf("app_image_config_name is required")
	}
	if s.ImageName == "" {
		return fmt.Errorf("image_name is required")
	}
	return nil
}

func (s *AwsSagemakerDomainCustomImageInput) applyDefaults() {
}

func (s *AwsSagemakerDomainCustomImageInput) toMap() map[string]any {
	m := make(map[string]any)
	m["app_image_config_name"] = s.AppImageConfigName
	m["image_name"] = s.ImageName
	if s.ImageVersionNumber != 0 {
		m["image_version_number"] = s.ImageVersionNumber
	}
	return m
}

// AwsSagemakerDomainDefaultUserSettings defines the default configuration inherited by all
//
//	user profiles in the domain. Each setting establishes a baseline that individual user
//	profiles inherit unless explicitly overridden.
type AwsSagemakerDomainDefaultUserSettingsInput struct {
	// execution_role_arn is the IAM role assumed by SageMaker when running notebooks,
	//  training jobs, and other ML workloads on behalf of users. This role determines what
	//  AWS resources (S3 buckets, ECR repos, Secrets Manager, etc.) users can access from
	//  their Studio sessions. The role must have a trust ...
	ExecutionRoleArn string `json:"execution_role_arn" jsonschema:"required,execution_role_arn is the IAM role assumed by SageMaker when running notebooks; training jobs; and other ML workloads on behalf of users. This role determines what AWS resources (S3 buckets; ECR repos..."`
	// security_group_ids are user-level security groups controlling network access for
	//  notebook instances and apps. These are attached to the ENIs created for each user's
	//  apps and control inbound/outbound traffic at the user level. Maximum 5 security groups.
	SecurityGroupIds []string `json:"security_group_ids,omitempty" jsonschema:"security_group_ids are user-level security groups controlling network access for notebook instances and apps. These are attached to the ENIs created for each user's apps and control inbound/outbound t..."`
	// default_landing_uri is the URI of the default app opened when a user accesses the domain.
	//  Common values:
	//    "studio::relative/JupyterLab" - opens JupyterLab (recommended for most teams)
	//    "studio::relative/JupyterServer:" - opens classic Jupyter Server
	//    "studio::" - opens SageMaker Studio home
	//  ...
	DefaultLandingUri string `json:"default_landing_uri,omitempty" jsonschema:"default_landing_uri is the URI of the default app opened when a user accesses the domain. Common values: 'studio::relative/JupyterLab' - opens JupyterLab (recommended for most teams) 'studio::relative..."`
	// studio_web_portal controls whether the SageMaker Studio web portal is accessible.
	//  "ENABLED" (default): users can access the full Studio web interface.
	//  "DISABLED": restricts access to programmatic-only usage (API/CLI).
	StudioWebPortal string `json:"studio_web_portal,omitempty" jsonschema:"studio_web_portal controls whether the SageMaker Studio web portal is accessible. 'ENABLED' (default): users can access the full Studio web interface. 'DISABLED': restricts access to programmatic-only..."`
	// jupyter_lab_app_settings configures JupyterLab, the primary IDE for SageMaker Studio.
	//  JupyterLab provides a modern notebook and code editing experience with built-in Git
	//  integration, terminal access, extension support, and collaborative editing.
	JupyterLabAppSettings *AwsSagemakerDomainJupyterLabAppSettingsInput `json:"jupyter_lab_app_settings,omitempty" jsonschema:"jupyter_lab_app_settings configures JupyterLab; the primary IDE for SageMaker Studio. JupyterLab provides a modern notebook and code editing experience with built-in Git integration; terminal access; ..."`
	// kernel_gateway_app_settings configures KernelGateway apps that provide custom compute
	//  kernels. Use KernelGateway to bring your own Docker images with specialized ML
	//  frameworks, custom libraries, or GPU-optimized environments that go beyond the
	//  standard SageMaker-provided kernels.
	KernelGatewayAppSettings *AwsSagemakerDomainKernelGatewayAppSettingsInput `json:"kernel_gateway_app_settings,omitempty" jsonschema:"kernel_gateway_app_settings configures KernelGateway apps that provide custom compute kernels. Use KernelGateway to bring your own Docker images with specialized ML frameworks; custom libraries; or GP..."`
	// sharing_settings controls notebook output sharing to S3. When enabled, notebook cell
	//  outputs are persisted to an S3 location, allowing team members to view results
	//  without running the notebook.
	SharingSettings *AwsSagemakerDomainSharingSettingsInput `json:"sharing_settings,omitempty" jsonschema:"sharing_settings controls notebook output sharing to S3. When enabled; notebook cell outputs are persisted to an S3 location; allowing team members to view results without running the notebook."`
	// space_storage_settings configures default EBS volume sizes for user spaces.
	//  Spaces use EBS volumes for working storage beyond the shared EFS home directory.
	SpaceStorageSettings *AwsSagemakerDomainSpaceStorageSettingsInput `json:"space_storage_settings,omitempty" jsonschema:"space_storage_settings configures default EBS volume sizes for user spaces. Spaces use EBS volumes for working storage beyond the shared EFS home directory."`
}

func (s *AwsSagemakerDomainDefaultUserSettingsInput) validate() error {
	if s.ExecutionRoleArn == "" {
		return fmt.Errorf("execution_role_arn is required")
	}
	if s.JupyterLabAppSettings != nil {
		if err := s.JupyterLabAppSettings.validate(); err != nil {
			return fmt.Errorf("jupyter_lab_app_settings: %w", err)
		}
	}
	if s.KernelGatewayAppSettings != nil {
		if err := s.KernelGatewayAppSettings.validate(); err != nil {
			return fmt.Errorf("kernel_gateway_app_settings: %w", err)
		}
	}
	if s.SharingSettings != nil {
		if err := s.SharingSettings.validate(); err != nil {
			return fmt.Errorf("sharing_settings: %w", err)
		}
	}
	if s.SpaceStorageSettings != nil {
		if err := s.SpaceStorageSettings.validate(); err != nil {
			return fmt.Errorf("space_storage_settings: %w", err)
		}
	}
	return nil
}

func (s *AwsSagemakerDomainDefaultUserSettingsInput) applyDefaults() {
	if s.StudioWebPortal == "" {
		s.StudioWebPortal = "ENABLED"
	}
	if s.JupyterLabAppSettings != nil {
		s.JupyterLabAppSettings.applyDefaults()
	}
	if s.KernelGatewayAppSettings != nil {
		s.KernelGatewayAppSettings.applyDefaults()
	}
	if s.SharingSettings != nil {
		s.SharingSettings.applyDefaults()
	}
	if s.SpaceStorageSettings != nil {
		s.SpaceStorageSettings.applyDefaults()
	}
}

func (s *AwsSagemakerDomainDefaultUserSettingsInput) toMap() map[string]any {
	m := make(map[string]any)
	m["execution_role_arn"] = s.ExecutionRoleArn
	if len(s.SecurityGroupIds) > 0 {
		m["security_group_ids"] = s.SecurityGroupIds
	}
	if s.DefaultLandingUri != "" {
		m["default_landing_uri"] = s.DefaultLandingUri
	}
	if s.StudioWebPortal != "" {
		m["studio_web_portal"] = s.StudioWebPortal
	}
	if s.JupyterLabAppSettings != nil {
		m["jupyter_lab_app_settings"] = s.JupyterLabAppSettings.toMap()
	}
	if s.KernelGatewayAppSettings != nil {
		m["kernel_gateway_app_settings"] = s.KernelGatewayAppSettings.toMap()
	}
	if s.SharingSettings != nil {
		m["sharing_settings"] = s.SharingSettings.toMap()
	}
	if s.SpaceStorageSettings != nil {
		m["space_storage_settings"] = s.SpaceStorageSettings.toMap()
	}
	return m
}

// AwsSagemakerDomainDockerSettings controls Docker access within the SageMaker Domain.
//
//	Docker access enables users to build custom training containers, test inference images,
//	and create reproducible ML pipelines directly within their Studio environment.
type AwsSagemakerDomainDockerSettingsInput struct {
	// enable_docker_access controls whether users can build and run Docker containers
	//  in their notebooks and terminals.
	//  "ENABLED": Docker commands (build, pull, run) are available.
	//  "DISABLED": Docker access is blocked.
	EnableDockerAccess string `json:"enable_docker_access,omitempty" jsonschema:"enable_docker_access controls whether users can build and run Docker containers in their notebooks and terminals. 'ENABLED': Docker commands (build; pull; run) are available. 'DISABLED': Docker access..."`
	// vpc_only_trusted_accounts restricts Docker image pulling to images from specified
	//  AWS account IDs when app_network_access_type is "VpcOnly". This prevents users from
	//  pulling arbitrary images from public registries, enforcing approved image sources.
	//  Maximum 20 account IDs.
	VpcOnlyTrustedAccounts []string `json:"vpc_only_trusted_accounts,omitempty" jsonschema:"vpc_only_trusted_accounts restricts Docker image pulling to images from specified AWS account IDs when app_network_access_type is 'VpcOnly'. This prevents users from pulling arbitrary images from publ..."`
}

func (s *AwsSagemakerDomainDockerSettingsInput) validate() error {
	return nil
}

func (s *AwsSagemakerDomainDockerSettingsInput) applyDefaults() {
}

func (s *AwsSagemakerDomainDockerSettingsInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.EnableDockerAccess != "" {
		m["enable_docker_access"] = s.EnableDockerAccess
	}
	if len(s.VpcOnlyTrustedAccounts) > 0 {
		m["vpc_only_trusted_accounts"] = s.VpcOnlyTrustedAccounts
	}
	return m
}

// AwsSagemakerDomainIdleSettings configures automatic shutdown of idle app instances.
//
//	Idle detection is based on user activity: notebook cell execution, terminal commands,
//	file operations, and UI interactions. When no activity is detected for the configured
//	timeout period, the instance is automatically stopped, releasing compute resources.
type AwsSagemakerDomainIdleSettingsInput struct {
	// lifecycle_management enables or disables automatic idle shutdown.
	//  "ENABLED": idle instances are automatically shut down after idle_timeout_in_minutes.
	//  "DISABLED": instances run until manually stopped (not recommended for production).
	LifecycleManagement string `json:"lifecycle_management,omitempty" jsonschema:"lifecycle_management enables or disables automatic idle shutdown. 'ENABLED': idle instances are automatically shut down after idle_timeout_in_minutes. 'DISABLED': instances run until manually stopped ..."`
	// idle_timeout_in_minutes is the duration of inactivity (in minutes) before an instance
	//  is automatically shut down. Range: 60-525600 (1 hour to 365 days).
	//  A reasonable production default is 120 (2 hours).
	IdleTimeoutInMinutes int32 `json:"idle_timeout_in_minutes,omitempty" jsonschema:"idle_timeout_in_minutes is the duration of inactivity (in minutes) before an instance is automatically shut down. Range: 60-525600 (1 hour to 365 days). A reasonable production default is 120 (2 hours..."`
	// min_idle_timeout_in_minutes sets the minimum idle timeout that individual users can
	//  configure for their own apps. Prevents users from setting excessively short timeouts
	//  that would cause disruptive shutdowns during brief pauses. Range: 60-525600.
	MinIdleTimeoutInMinutes int32 `json:"min_idle_timeout_in_minutes,omitempty" jsonschema:"min_idle_timeout_in_minutes sets the minimum idle timeout that individual users can configure for their own apps. Prevents users from setting excessively short timeouts that would cause disruptive shu..."`
	// max_idle_timeout_in_minutes sets the maximum idle timeout that individual users can
	//  configure. Prevents users from effectively disabling idle shutdown by setting
	//  extremely long timeouts. Range: 60-525600.
	MaxIdleTimeoutInMinutes int32 `json:"max_idle_timeout_in_minutes,omitempty" jsonschema:"max_idle_timeout_in_minutes sets the maximum idle timeout that individual users can configure. Prevents users from effectively disabling idle shutdown by setting extremely long timeouts. Range: 60-525..."`
}

func (s *AwsSagemakerDomainIdleSettingsInput) validate() error {
	return nil
}

func (s *AwsSagemakerDomainIdleSettingsInput) applyDefaults() {
}

func (s *AwsSagemakerDomainIdleSettingsInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.LifecycleManagement != "" {
		m["lifecycle_management"] = s.LifecycleManagement
	}
	if s.IdleTimeoutInMinutes != 0 {
		m["idle_timeout_in_minutes"] = s.IdleTimeoutInMinutes
	}
	if s.MinIdleTimeoutInMinutes != 0 {
		m["min_idle_timeout_in_minutes"] = s.MinIdleTimeoutInMinutes
	}
	if s.MaxIdleTimeoutInMinutes != 0 {
		m["max_idle_timeout_in_minutes"] = s.MaxIdleTimeoutInMinutes
	}
	return m
}

// AwsSagemakerDomainJupyterLabAppSettings configures the JupyterLab IDE for the domain.
//
//	JupyterLab is the recommended primary IDE for SageMaker Studio, providing notebooks,
//	code editors, terminals, and extension support in a modern web interface.
type AwsSagemakerDomainJupyterLabAppSettingsInput struct {
	// default_resource_spec sets the default compute instance type and lifecycle configuration
	//  for new JupyterLab apps. Users can override the instance type at app creation time.
	DefaultResourceSpec *AwsSagemakerDomainResourceSpecInput `json:"default_resource_spec,omitempty" jsonschema:"default_resource_spec sets the default compute instance type and lifecycle configuration for new JupyterLab apps. Users can override the instance type at app creation time."`
	// lifecycle_config_arns are ARNs of lifecycle configuration scripts that run when
	//  JupyterLab apps start. Use lifecycle configs to install Python packages, configure
	//  JupyterLab extensions, set environment variables, or mount additional storage.
	LifecycleConfigArns []string `json:"lifecycle_config_arns,omitempty" jsonschema:"lifecycle_config_arns are ARNs of lifecycle configuration scripts that run when JupyterLab apps start. Use lifecycle configs to install Python packages; configure JupyterLab extensions; set environmen..."`
	// custom_images are custom Docker images available as JupyterLab kernels.
	//  Each image must be registered in SageMaker via an AppImageConfig that defines
	//  the kernel specification and file system layout. Maximum 200 images.
	CustomImages []*AwsSagemakerDomainCustomImageInput `json:"custom_images,omitempty" jsonschema:"custom_images are custom Docker images available as JupyterLab kernels. Each image must be registered in SageMaker via an AppImageConfig that defines the kernel specification and file system layout. M..."`
	// code_repositories are Git repositories automatically cloned into JupyterLab on startup.
	//  Provides immediate access to team code, shared notebooks, and documentation.
	//  Maximum 10 repositories.
	CodeRepositories []*AwsSagemakerDomainCodeRepositoryInput `json:"code_repositories,omitempty" jsonschema:"code_repositories are Git repositories automatically cloned into JupyterLab on startup. Provides immediate access to team code; shared notebooks; and documentation. Maximum 10 repositories."`
	// idle_settings configures automatic shutdown of idle JupyterLab instances.
	//  Critical for cost management: without idle timeout, instances run 24/7 at full
	//  compute cost even when no user is interacting with them.
	IdleSettings *AwsSagemakerDomainIdleSettingsInput `json:"idle_settings,omitempty" jsonschema:"idle_settings configures automatic shutdown of idle JupyterLab instances. Critical for cost management: without idle timeout; instances run 24/7 at full compute cost even when no user is interacting w..."`
}

func (s *AwsSagemakerDomainJupyterLabAppSettingsInput) validate() error {
	if s.DefaultResourceSpec != nil {
		if err := s.DefaultResourceSpec.validate(); err != nil {
			return fmt.Errorf("default_resource_spec: %w", err)
		}
	}
	for i, v := range s.CustomImages {
		if v != nil {
			if err := v.validate(); err != nil {
				return fmt.Errorf("custom_images[%d]: %w", i, err)
			}
		}
	}
	for i, v := range s.CodeRepositories {
		if v != nil {
			if err := v.validate(); err != nil {
				return fmt.Errorf("code_repositories[%d]: %w", i, err)
			}
		}
	}
	if s.IdleSettings != nil {
		if err := s.IdleSettings.validate(); err != nil {
			return fmt.Errorf("idle_settings: %w", err)
		}
	}
	return nil
}

func (s *AwsSagemakerDomainJupyterLabAppSettingsInput) applyDefaults() {
	if s.DefaultResourceSpec != nil {
		s.DefaultResourceSpec.applyDefaults()
	}
	if s.IdleSettings != nil {
		s.IdleSettings.applyDefaults()
	}
}

func (s *AwsSagemakerDomainJupyterLabAppSettingsInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.DefaultResourceSpec != nil {
		m["default_resource_spec"] = s.DefaultResourceSpec.toMap()
	}
	if len(s.LifecycleConfigArns) > 0 {
		m["lifecycle_config_arns"] = s.LifecycleConfigArns
	}
	if len(s.CustomImages) > 0 {
		items := make([]any, len(s.CustomImages))
		for i, v := range s.CustomImages {
			if v != nil {
				items[i] = v.toMap()
			}
		}
		m["custom_images"] = items
	}
	if len(s.CodeRepositories) > 0 {
		items := make([]any, len(s.CodeRepositories))
		for i, v := range s.CodeRepositories {
			if v != nil {
				items[i] = v.toMap()
			}
		}
		m["code_repositories"] = items
	}
	if s.IdleSettings != nil {
		m["idle_settings"] = s.IdleSettings.toMap()
	}
	return m
}

// AwsSagemakerDomainKernelGatewayAppSettings configures KernelGateway for custom compute kernels.
//
//	KernelGateway enables "bring your own image" workflows where teams use custom Docker
//	images with specialized ML frameworks, proprietary libraries, or GPU-optimized stacks
//	that are not available in the standard SageMaker-provided kernels.
type AwsSagemakerDomainKernelGatewayAppSettingsInput struct {
	// default_resource_spec sets the default compute instance type and lifecycle configuration
	//  for new KernelGateway apps.
	DefaultResourceSpec *AwsSagemakerDomainResourceSpecInput `json:"default_resource_spec,omitempty" jsonschema:"default_resource_spec sets the default compute instance type and lifecycle configuration for new KernelGateway apps."`
	// lifecycle_config_arns are ARNs of lifecycle configuration scripts for KernelGateway apps.
	LifecycleConfigArns []string `json:"lifecycle_config_arns,omitempty" jsonschema:"lifecycle_config_arns are ARNs of lifecycle configuration scripts for KernelGateway apps."`
	// custom_images are custom Docker images available as KernelGateway kernels.
	//  Each image must be registered in SageMaker via an AppImageConfig. Maximum 200 images.
	CustomImages []*AwsSagemakerDomainCustomImageInput `json:"custom_images,omitempty" jsonschema:"custom_images are custom Docker images available as KernelGateway kernels. Each image must be registered in SageMaker via an AppImageConfig. Maximum 200 images."`
}

func (s *AwsSagemakerDomainKernelGatewayAppSettingsInput) validate() error {
	if s.DefaultResourceSpec != nil {
		if err := s.DefaultResourceSpec.validate(); err != nil {
			return fmt.Errorf("default_resource_spec: %w", err)
		}
	}
	for i, v := range s.CustomImages {
		if v != nil {
			if err := v.validate(); err != nil {
				return fmt.Errorf("custom_images[%d]: %w", i, err)
			}
		}
	}
	return nil
}

func (s *AwsSagemakerDomainKernelGatewayAppSettingsInput) applyDefaults() {
	if s.DefaultResourceSpec != nil {
		s.DefaultResourceSpec.applyDefaults()
	}
}

func (s *AwsSagemakerDomainKernelGatewayAppSettingsInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.DefaultResourceSpec != nil {
		m["default_resource_spec"] = s.DefaultResourceSpec.toMap()
	}
	if len(s.LifecycleConfigArns) > 0 {
		m["lifecycle_config_arns"] = s.LifecycleConfigArns
	}
	if len(s.CustomImages) > 0 {
		items := make([]any, len(s.CustomImages))
		for i, v := range s.CustomImages {
			if v != nil {
				items[i] = v.toMap()
			}
		}
		m["custom_images"] = items
	}
	return m
}

// AwsSagemakerDomainResourceSpec defines the default compute and image configuration for an
//
//	app type. This shared structure is used by JupyterLab, KernelGateway, and other app settings.
type AwsSagemakerDomainResourceSpecInput struct {
	// instance_type is the EC2 instance type for the app's compute.
	//  Common choices:
	//    "ml.t3.medium" - development/exploration (2 vCPU, 4 GB)
	//    "ml.m5.large" - general-purpose notebooks (2 vCPU, 8 GB)
	//    "ml.g4dn.xlarge" - GPU workloads (1 GPU, 4 vCPU, 16 GB)
	//    "ml.p3.2xlarge" - heavy training (1 V100...
	InstanceType string `json:"instance_type,omitempty" jsonschema:"instance_type is the EC2 instance type for the app's compute. Common choices: 'ml.t3.medium' - development/exploration (2 vCPU; 4 GB) 'ml.m5.large' - general-purpose notebooks (2 vCPU; 8 GB) 'ml.g4dn...."`
	// lifecycle_config_arn is the ARN of a lifecycle configuration script that runs
	//  when this specific app type starts.
	LifecycleConfigArn string `json:"lifecycle_config_arn,omitempty" jsonschema:"lifecycle_config_arn is the ARN of a lifecycle configuration script that runs when this specific app type starts."`
	// sagemaker_image_arn is the ARN of a SageMaker Image that defines the app's container.
	//  Use this to specify a custom base image instead of the SageMaker-provided default.
	SagemakerImageArn string `json:"sagemaker_image_arn,omitempty" jsonschema:"sagemaker_image_arn is the ARN of a SageMaker Image that defines the app's container. Use this to specify a custom base image instead of the SageMaker-provided default."`
	// sagemaker_image_version_alias is a human-readable alias for a specific image version
	//  (e.g., "latest", "v2.0"). Mutually exclusive with sagemaker_image_version_arn.
	SagemakerImageVersionAlias string `json:"sagemaker_image_version_alias,omitempty" jsonschema:"sagemaker_image_version_alias is a human-readable alias for a specific image version (e.g.; 'latest'; 'v2.0'). Mutually exclusive with sagemaker_image_version_arn."`
	// sagemaker_image_version_arn is the ARN of a specific SageMaker image version.
	//  Pins the app to an exact image version for reproducibility across team members.
	//  Mutually exclusive with sagemaker_image_version_alias.
	SagemakerImageVersionArn string `json:"sagemaker_image_version_arn,omitempty" jsonschema:"sagemaker_image_version_arn is the ARN of a specific SageMaker image version. Pins the app to an exact image version for reproducibility across team members. Mutually exclusive with sagemaker_image_ve..."`
}

func (s *AwsSagemakerDomainResourceSpecInput) validate() error {
	return nil
}

func (s *AwsSagemakerDomainResourceSpecInput) applyDefaults() {
}

func (s *AwsSagemakerDomainResourceSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.InstanceType != "" {
		m["instance_type"] = s.InstanceType
	}
	if s.LifecycleConfigArn != "" {
		m["lifecycle_config_arn"] = s.LifecycleConfigArn
	}
	if s.SagemakerImageArn != "" {
		m["sagemaker_image_arn"] = s.SagemakerImageArn
	}
	if s.SagemakerImageVersionAlias != "" {
		m["sagemaker_image_version_alias"] = s.SagemakerImageVersionAlias
	}
	if s.SagemakerImageVersionArn != "" {
		m["sagemaker_image_version_arn"] = s.SagemakerImageVersionArn
	}
	return m
}

// AwsSagemakerDomainSharingSettings controls notebook output sharing to S3.
//
//	When enabled, notebook cell outputs (plots, tables, printed results) are automatically
//	persisted to an S3 location, allowing team members to view results without running
//	the notebook themselves -- useful for review workflows and audit trails.
type AwsSagemakerDomainSharingSettingsInput struct {
	// notebook_output_option controls whether notebook cell outputs are persisted to S3.
	//  "Allowed": outputs are copied to S3 at the location specified by s3_output_path.
	//  "Disabled" (default): outputs are not shared externally.
	NotebookOutputOption string `json:"notebook_output_option,omitempty" jsonschema:"notebook_output_option controls whether notebook cell outputs are persisted to S3. 'Allowed': outputs are copied to S3 at the location specified by s3_output_path. 'Disabled' (default): outputs are no..."`
	// s3_kms_key_id is the KMS key used to encrypt shared notebook outputs in S3.
	//  If omitted, outputs are encrypted with the default S3 bucket encryption.
	S3KmsKeyId string `json:"s3_kms_key_id,omitempty" jsonschema:"s3_kms_key_id is the KMS key used to encrypt shared notebook outputs in S3. If omitted; outputs are encrypted with the default S3 bucket encryption."`
	// s3_output_path is the S3 URI where shared notebook outputs are stored.
	//  Required when notebook_output_option is "Allowed".
	//  Example: "s3://my-team-bucket/notebook-outputs/"
	S3OutputPath string `json:"s3_output_path,omitempty" jsonschema:"s3_output_path is the S3 URI where shared notebook outputs are stored. Required when notebook_output_option is 'Allowed'. Example: 's3://my-team-bucket/notebook-outputs/'"`
}

func (s *AwsSagemakerDomainSharingSettingsInput) validate() error {
	return nil
}

func (s *AwsSagemakerDomainSharingSettingsInput) applyDefaults() {
	if s.NotebookOutputOption == "" {
		s.NotebookOutputOption = "Disabled"
	}
}

func (s *AwsSagemakerDomainSharingSettingsInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.NotebookOutputOption != "" {
		m["notebook_output_option"] = s.NotebookOutputOption
	}
	if s.S3KmsKeyId != "" {
		m["s3_kms_key_id"] = s.S3KmsKeyId
	}
	if s.S3OutputPath != "" {
		m["s3_output_path"] = s.S3OutputPath
	}
	return m
}

// AwsSagemakerDomainSpaceStorageSettings configures default EBS volume sizes for user spaces.
//
//	Spaces use EBS volumes for fast working storage (code checkouts, intermediate training data,
//	model artifacts) beyond the shared EFS home directory.
type AwsSagemakerDomainSpaceStorageSettingsInput struct {
	// default_ebs_volume_size_in_gb is the default EBS volume size (in GB) assigned to new spaces.
	DefaultEbsVolumeSizeInGb int32 `json:"default_ebs_volume_size_in_gb" jsonschema:"required,default_ebs_volume_size_in_gb is the default EBS volume size (in GB) assigned to new spaces."`
	// maximum_ebs_volume_size_in_gb is the maximum EBS volume size (in GB) that users can request
	//  for their spaces. Must be >= default_ebs_volume_size_in_gb.
	MaximumEbsVolumeSizeInGb int32 `json:"maximum_ebs_volume_size_in_gb" jsonschema:"required,maximum_ebs_volume_size_in_gb is the maximum EBS volume size (in GB) that users can request for their spaces. Must be >= default_ebs_volume_size_in_gb."`
}

func (s *AwsSagemakerDomainSpaceStorageSettingsInput) validate() error {
	return nil
}

func (s *AwsSagemakerDomainSpaceStorageSettingsInput) applyDefaults() {
}

func (s *AwsSagemakerDomainSpaceStorageSettingsInput) toMap() map[string]any {
	m := make(map[string]any)
	m["default_ebs_volume_size_in_gb"] = s.DefaultEbsVolumeSizeInGb
	m["maximum_ebs_volume_size_in_gb"] = s.MaximumEbsVolumeSizeInGb
	return m
}

// ParseAwsSagemakerDomain validates and normalizes a AwsSagemakerDomain cloud_object.
func ParseAwsSagemakerDomain(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "aws.openmcf.org/v1", "AwsSagemakerDomain"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec AwsSagemakerDomainSpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
