// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-27T22:24:53+05:30

package aws

import (
	"encoding/json"
	"fmt"

	"github.com/plantonhq/mcp-server-planton/internal/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// AwsElasticIp represents a static public IPv4 address allocated from Amazon's
//
//	pool or a Bring-Your-Own-IP (BYOIP) pool. Elastic IPs persist until explicitly
//	released, providing stable public endpoints for Network Load Balancers, NAT
//	Gateways, and EC2 instances.
type AwsElasticIpSpecInput struct {
	// The AWS region where the resource will be created.
	//  Example: "us-west-2", "eu-west-1"
	Region string `json:"region,omitempty" jsonschema:"The AWS region where the resource will be created. Example: 'us-west-2'; 'eu-west-1'"`
	// EC2 IPv4 address pool identifier to allocate from. Set this to a BYOIP pool
	//  ID when you want the EIP to come from your own registered IP address range
	//  instead of Amazon's pool. When omitted, Amazon allocates from its own pool.
	//
	//  This field is ForceNew: changing it requires replacing the EIP.
	PublicIpv4Pool string `json:"public_ipv4_pool,omitempty" jsonschema:"EC2 IPv4 address pool identifier to allocate from. Set this to a BYOIP pool ID when you want the EIP to come from your own registered IP address range instead of Amazon's pool. When omitted; Amazon al..."`
	// Request a specific IP address from the BYOIP pool identified by
	//  `public_ipv4_pool`. The address must belong to the specified pool.
	//  Only meaningful when `public_ipv4_pool` is set.
	//
	//  This field is ForceNew: changing it requires replacing the EIP.
	Address string `json:"address,omitempty" jsonschema:"Request a specific IP address from the BYOIP pool identified by 'public_ipv4_pool'. The address must belong to the specified pool. Only meaningful when 'public_ipv4_pool' is set. This field is ForceNe..."`
	// Network border group that controls the location scope of this EIP. Used for
	//  allocating EIPs in AWS Local Zones or Wavelength zones. When omitted, the
	//  EIP is scoped to the Region.
	//
	//  Example values: "us-east-1", "us-east-1-wl1-bos-wlz-1" (Wavelength),
	//  "us-west-2-lax-1a" (Local Zone).
	//
	//  This field i...
	NetworkBorderGroup string `json:"network_border_group,omitempty" jsonschema:"Network border group that controls the location scope of this EIP. Used for allocating EIPs in AWS Local Zones or Wavelength zones. When omitted; the EIP is scoped to the Region. Example values: 'us-e..."`
}

func (s *AwsElasticIpSpecInput) validate() error {
	return nil
}

func (s *AwsElasticIpSpecInput) applyDefaults() {
}

func (s *AwsElasticIpSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	if s.Region != "" {
		m["region"] = s.Region
	}
	if s.PublicIpv4Pool != "" {
		m["public_ipv4_pool"] = s.PublicIpv4Pool
	}
	if s.Address != "" {
		m["address"] = s.Address
	}
	if s.NetworkBorderGroup != "" {
		m["network_border_group"] = s.NetworkBorderGroup
	}
	return m
}

// ParseAwsElasticIp validates and normalizes a AwsElasticIp cloud_object.
func ParseAwsElasticIp(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "aws.openmcf.org/v1", "AwsElasticIp"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec AwsElasticIpSpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
