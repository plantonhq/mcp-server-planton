// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-27T22:24:53+05:30

package alicloud

import (
	"encoding/json"
	"fmt"

	"github.com/plantonhq/mcp-server-planton/internal/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// alicloud-rds-instance
type AliCloudRdsInstanceSpecInput struct {
	// Alibaba Cloud region where the RDS instance will be created.
	//  Must match the region of the VSwitch.
	//  Examples: "cn-hangzhou", "cn-shanghai", "us-west-1", "ap-southeast-1".
	Region string `json:"region" jsonschema:"required,Alibaba Cloud region where the RDS instance will be created. Must match the region of the VSwitch. Examples: 'cn-hangzhou'; 'cn-shanghai'; 'us-west-1'; 'ap-southeast-1'."`
	// Database engine. Determines which relational database software runs on the
	//  instance. Each engine has its own set of valid versions, instance types,
	//  and character sets.
	Engine string `json:"engine" jsonschema:"required,Database engine. Determines which relational database software runs on the instance. Each engine has its own set of valid versions; instance types; and character sets."`
	// Database engine version. Must be a version supported by the selected
	//  engine. Examples: "8.0", "5.7" (MySQL), "16.0", "15.0" (PostgreSQL),
	//  "2019_ent" (SQL Server), "10.3" (MariaDB).
	EngineVersion string `json:"engine_version" jsonschema:"required,Database engine version. Must be a version supported by the selected engine. Examples: '8.0'; '5.7' (MySQL); '16.0'; '15.0' (PostgreSQL); '2019_ent' (SQL Server); '10.3' (MariaDB)."`
	// RDS instance class that determines CPU, memory, and I/O capacity.
	//  Examples: "rds.mysql.s2.large", "rds.pg.s2.large",
	//  "rds.mssql.s2.large", "rds.mysql.t1.small".
	InstanceType string `json:"instance_type" jsonschema:"required,RDS instance class that determines CPU; memory; and I/O capacity. Examples: 'rds.mysql.s2.large'; 'rds.pg.s2.large'; 'rds.mssql.s2.large'; 'rds.mysql.t1.small'."`
	// Storage size in GB. The valid range depends on the engine, instance type,
	//  and storage type. Typical ranges: 20-6000 GB for cloud_essd.
	InstanceStorage int32 `json:"instance_storage" jsonschema:"required,Storage size in GB. The valid range depends on the engine; instance type; and storage type. Typical ranges: 20-6000 GB for cloud_essd."`
	// VSwitch ID where the RDS instance is placed. The instance inherits the
	//  VPC and availability zone from the VSwitch.
	VswitchId string `json:"vswitch_id" jsonschema:"required,VSwitch ID where the RDS instance is placed. The instance inherits the VPC and availability zone from the VSwitch."`
	// RDS instance name. 2-256 characters.
	//  If omitted, defaults to the metadata.name.
	InstanceName string `json:"instance_name,omitempty" jsonschema:"RDS instance name. 2-256 characters. If omitted; defaults to the metadata.name."`
	// Billing method. "Postpaid" for pay-as-you-go, "Prepaid" for subscription.
	//  Default: "Postpaid"
	InstanceChargeType string `json:"instance_charge_type,omitempty" jsonschema:"Billing method. 'Postpaid' for pay-as-you-go; 'Prepaid' for subscription. Default: 'Postpaid'"`
	// Instance category that determines the deployment architecture.
	//  "Basic" -- single node, suitable for dev/test.
	//  "HighAvailability" -- primary + standby with automatic failover.
	//  "AlwaysOn" -- SQL Server AlwaysOn Availability Group clusters.
	//  "Finance" -- three-node enterprise edition for financial s...
	Category string `json:"category,omitempty" jsonschema:"Instance category that determines the deployment architecture. 'Basic' -- single node; suitable for dev/test. 'HighAvailability' -- primary + standby with automatic failover. 'AlwaysOn' -- SQL Server ..."`
	// Storage type for the instance's data disks.
	//  "local_ssd" -- local SSD (only for specific instance types).
	//  "cloud_ssd" -- standard cloud SSD.
	//  "cloud_essd" -- enhanced SSD (recommended for most workloads).
	//  "cloud_essd2" -- ESSD PL2 (higher IOPS).
	//  "cloud_essd3" -- ESSD PL3 (highest IOPS).
	DbInstanceStorageType string `json:"db_instance_storage_type,omitempty" jsonschema:"Storage type for the instance's data disks. 'local_ssd' -- local SSD (only for specific instance types). 'cloud_ssd' -- standard cloud SSD. 'cloud_essd' -- enhanced SSD (recommended for most workloads..."`
	// Availability zone ID for the primary instance.
	//  If omitted, Alibaba Cloud selects a zone from the VSwitch's region.
	//  Examples: "cn-hangzhou-a", "cn-shanghai-b".
	ZoneId string `json:"zone_id,omitempty" jsonschema:"Availability zone ID for the primary instance. If omitted; Alibaba Cloud selects a zone from the VSwitch's region. Examples: 'cn-hangzhou-a'; 'cn-shanghai-b'."`
	// Availability zone ID for the standby instance in HA deployments.
	//  Must differ from zone_id for cross-AZ high availability.
	//  Only applicable when category is "HighAvailability" or "Finance".
	ZoneIdSlaveA string `json:"zone_id_slave_a,omitempty" jsonschema:"Availability zone ID for the standby instance in HA deployments. Must differ from zone_id for cross-AZ high availability. Only applicable when category is 'HighAvailability' or 'Finance'."`
	// IP addresses or CIDR blocks allowed to access the RDS instance.
	//  Default: ["127.0.0.1"] (no access). Set to ["0.0.0.0/0"] to allow all
	//  (not recommended for production).
	SecurityIps []string `json:"security_ips,omitempty" jsonschema:"IP addresses or CIDR blocks allowed to access the RDS instance. Default: ['127.0.0.1'] (no access). Set to ['0.0.0.0/0'] to allow all (not recommended for production)."`
	// VPC security group IDs to associate with the RDS instance.
	//  Provides network-level access control in addition to the IP whitelist.
	SecurityGroupIds []string `json:"security_group_ids,omitempty" jsonschema:"VPC security group IDs to associate with the RDS instance. Provides network-level access control in addition to the IP whitelist."`
	// Monitoring data collection interval in seconds.
	//  Valid values: 5, 10, 60, 300. Lower values provide finer granularity
	//  but may increase monitoring costs.
	MonitoringPeriod int32 `json:"monitoring_period,omitempty" jsonschema:"Monitoring data collection interval in seconds. Valid values: 5; 10; 60; 300. Lower values provide finer granularity but may increase monitoring costs."`
	// Maintenance window in UTC. The RDS service may perform minor version
	//  upgrades or patches during this window.
	//  Format: "HH:mmZ-HH:mmZ" (e.g., "02:00Z-06:00Z").
	MaintainTime string `json:"maintain_time,omitempty" jsonschema:"Maintenance window in UTC. The RDS service may perform minor version upgrades or patches during this window. Format: 'HH:mmZ-HH:mmZ' (e.g.; '02:00Z-06:00Z')."`
	// Enable deletion protection to prevent accidental deletion via the
	//  console or API.
	DeletionProtection bool `json:"deletion_protection,omitempty" jsonschema:"Enable deletion protection to prevent accidental deletion via the console or API."`
	// SSL/TLS configuration for encrypted client connections.
	//  "Open" enables SSL and generates server certificates.
	//  "Close" disables SSL (default).
	SslAction string `json:"ssl_action,omitempty" jsonschema:"SSL/TLS configuration for encrypted client connections. 'Open' enables SSL and generates server certificates. 'Close' disables SSL (default)."`
	// Transparent Data Encryption (TDE) status. TDE encrypts data at rest
	//  at the storage level. Once enabled, TDE cannot be disabled.
	//  "Enabled" turns on TDE. "Disabled" is the default.
	TdeStatus string `json:"tde_status,omitempty" jsonschema:"Transparent Data Encryption (TDE) status. TDE encrypts data at rest at the storage level. Once enabled; TDE cannot be disabled. 'Enabled' turns on TDE. 'Disabled' is the default."`
	// KMS key ID for disk encryption. When set, the instance's storage is
	//  encrypted using this customer-managed key.
	EncryptionKey string `json:"encryption_key,omitempty" jsonschema:"KMS key ID for disk encryption. When set; the instance's storage is encrypted using this customer-managed key."`
	// Auto-renewal for Prepaid instances. Ignored for Postpaid instances.
	AutoRenew bool `json:"auto_renew,omitempty" jsonschema:"Auto-renewal for Prepaid instances. Ignored for Postpaid instances."`
	// Auto-renewal period in months (1-12). Only applicable when auto_renew
	//  is true and instance_charge_type is "Prepaid".
	AutoRenewPeriod int32 `json:"auto_renew_period,omitempty" jsonschema:"Auto-renewal period in months (1-12). Only applicable when auto_renew is true and instance_charge_type is 'Prepaid'."`
	// Subscription period in months. Only applicable when instance_charge_type
	//  is "Prepaid". Valid values: 1-9, 12, 24, 36.
	Period int32 `json:"period,omitempty" jsonschema:"Subscription period in months. Only applicable when instance_charge_type is 'Prepaid'. Valid values: 1-9; 12; 24; 36."`
	// Alibaba Cloud resource group ID for organizational grouping (per DD05).
	//  If omitted, the instance is placed in the account's default resource group.
	ResourceGroupId string `json:"resource_group_id,omitempty" jsonschema:"Alibaba Cloud resource group ID for organizational grouping (per DD05). If omitted; the instance is placed in the account's default resource group."`
	// Tags to apply to the RDS instance resource.
	Tags map[string]string `json:"tags,omitempty" jsonschema:"Tags to apply to the RDS instance resource."`
	// Database parameter overrides. Each parameter sets a specific database
	//  engine configuration value, overriding the default from the parameter
	//  group. Refer to Alibaba Cloud documentation for valid parameter names
	//  and value ranges per engine.
	Parameters []*AliCloudRdsParameterInput `json:"parameters,omitempty" jsonschema:"Database parameter overrides. Each parameter sets a specific database engine configuration value; overriding the default from the parameter group. Refer to Alibaba Cloud documentation for valid parame..."`
	// Databases to create within the RDS instance.
	Databases []*AliCloudRdsDatabaseInput `json:"databases,omitempty" jsonschema:"Databases to create within the RDS instance."`
	// Database accounts to create within the RDS instance.
	Accounts []*AliCloudRdsAccountInput `json:"accounts,omitempty" jsonschema:"Database accounts to create within the RDS instance."`
}

func (s *AliCloudRdsInstanceSpecInput) validate() error {
	if s.Region == "" {
		return fmt.Errorf("region is required")
	}
	if s.Engine == "" {
		return fmt.Errorf("engine is required")
	}
	if s.EngineVersion == "" {
		return fmt.Errorf("engine_version is required")
	}
	if s.InstanceType == "" {
		return fmt.Errorf("instance_type is required")
	}
	if s.VswitchId == "" {
		return fmt.Errorf("vswitch_id is required")
	}
	for i, v := range s.Parameters {
		if v != nil {
			if err := v.validate(); err != nil {
				return fmt.Errorf("parameters[%d]: %w", i, err)
			}
		}
	}
	for i, v := range s.Databases {
		if v != nil {
			if err := v.validate(); err != nil {
				return fmt.Errorf("databases[%d]: %w", i, err)
			}
		}
	}
	for i, v := range s.Accounts {
		if v != nil {
			if err := v.validate(); err != nil {
				return fmt.Errorf("accounts[%d]: %w", i, err)
			}
		}
	}
	return nil
}

func (s *AliCloudRdsInstanceSpecInput) applyDefaults() {
	if s.InstanceChargeType == "" {
		s.InstanceChargeType = "Postpaid"
	}
	if s.Category == "" {
		s.Category = "HighAvailability"
	}
}

func (s *AliCloudRdsInstanceSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	m["region"] = s.Region
	m["engine"] = s.Engine
	m["engine_version"] = s.EngineVersion
	m["instance_type"] = s.InstanceType
	m["instance_storage"] = s.InstanceStorage
	m["vswitch_id"] = s.VswitchId
	if s.InstanceName != "" {
		m["instance_name"] = s.InstanceName
	}
	if s.InstanceChargeType != "" {
		m["instance_charge_type"] = s.InstanceChargeType
	}
	if s.Category != "" {
		m["category"] = s.Category
	}
	if s.DbInstanceStorageType != "" {
		m["db_instance_storage_type"] = s.DbInstanceStorageType
	}
	if s.ZoneId != "" {
		m["zone_id"] = s.ZoneId
	}
	if s.ZoneIdSlaveA != "" {
		m["zone_id_slave_a"] = s.ZoneIdSlaveA
	}
	if len(s.SecurityIps) > 0 {
		m["security_ips"] = s.SecurityIps
	}
	if len(s.SecurityGroupIds) > 0 {
		m["security_group_ids"] = s.SecurityGroupIds
	}
	if s.MonitoringPeriod != 0 {
		m["monitoring_period"] = s.MonitoringPeriod
	}
	if s.MaintainTime != "" {
		m["maintain_time"] = s.MaintainTime
	}
	if s.DeletionProtection {
		m["deletion_protection"] = s.DeletionProtection
	}
	if s.SslAction != "" {
		m["ssl_action"] = s.SslAction
	}
	if s.TdeStatus != "" {
		m["tde_status"] = s.TdeStatus
	}
	if s.EncryptionKey != "" {
		m["encryption_key"] = s.EncryptionKey
	}
	if s.AutoRenew {
		m["auto_renew"] = s.AutoRenew
	}
	if s.AutoRenewPeriod != 0 {
		m["auto_renew_period"] = s.AutoRenewPeriod
	}
	if s.Period != 0 {
		m["period"] = s.Period
	}
	if s.ResourceGroupId != "" {
		m["resource_group_id"] = s.ResourceGroupId
	}
	if len(s.Tags) > 0 {
		m["tags"] = s.Tags
	}
	if len(s.Parameters) > 0 {
		items := make([]any, len(s.Parameters))
		for i, v := range s.Parameters {
			if v != nil {
				items[i] = v.toMap()
			}
		}
		m["parameters"] = items
	}
	if len(s.Databases) > 0 {
		items := make([]any, len(s.Databases))
		for i, v := range s.Databases {
			if v != nil {
				items[i] = v.toMap()
			}
		}
		m["databases"] = items
	}
	if len(s.Accounts) > 0 {
		items := make([]any, len(s.Accounts))
		for i, v := range s.Accounts {
			if v != nil {
				items[i] = v.toMap()
			}
		}
		m["accounts"] = items
	}
	return m
}

// AliCloudRdsAccount defines a database account to create within the RDS
//
//	instance.
type AliCloudRdsAccountInput struct {
	// Account login name. Must match [a-z][a-z0-9_]{0,61}[a-z0-9].
	AccountName string `json:"account_name" jsonschema:"required,Account login name. Must match [a-z][a-z0-9_]{0;61}[a-z0-9]."`
	// Account password. Must meet the Alibaba Cloud password complexity
	//  requirements: 8-32 characters, containing at least three of uppercase,
	//  lowercase, digits, and special characters.
	AccountPassword string `json:"account_password" jsonschema:"required,Account password. Must meet the Alibaba Cloud password complexity requirements: 8-32 characters; containing at least three of uppercase; lowercase; digits; and special characters."`
	// Account type.
	//  "Normal" -- standard account with explicit database privileges.
	//  "Super" -- superuser with full privileges on all databases.
	//  Default: "Normal"
	AccountType string `json:"account_type,omitempty" jsonschema:"Account type. 'Normal' -- standard account with explicit database privileges. 'Super' -- superuser with full privileges on all databases. Default: 'Normal'"`
	// Human-readable description of the account's purpose.
	AccountDescription string `json:"account_description,omitempty" jsonschema:"Human-readable description of the account's purpose."`
	// Database privileges to grant to this account. Each entry grants a
	//  privilege level on a set of databases. Only applicable when account_type
	//  is "Normal"; Super accounts have implicit full access.
	Privileges []*AliCloudRdsAccountPrivilegeInput `json:"privileges,omitempty" jsonschema:"Database privileges to grant to this account. Each entry grants a privilege level on a set of databases. Only applicable when account_type is 'Normal'; Super accounts have implicit full access."`
}

func (s *AliCloudRdsAccountInput) validate() error {
	if s.AccountName == "" {
		return fmt.Errorf("account_name is required")
	}
	if s.AccountPassword == "" {
		return fmt.Errorf("account_password is required")
	}
	for i, v := range s.Privileges {
		if v != nil {
			if err := v.validate(); err != nil {
				return fmt.Errorf("privileges[%d]: %w", i, err)
			}
		}
	}
	return nil
}

func (s *AliCloudRdsAccountInput) applyDefaults() {
	if s.AccountType == "" {
		s.AccountType = "Normal"
	}
}

func (s *AliCloudRdsAccountInput) toMap() map[string]any {
	m := make(map[string]any)
	m["account_name"] = s.AccountName
	m["account_password"] = s.AccountPassword
	if s.AccountType != "" {
		m["account_type"] = s.AccountType
	}
	if s.AccountDescription != "" {
		m["account_description"] = s.AccountDescription
	}
	if len(s.Privileges) > 0 {
		items := make([]any, len(s.Privileges))
		for i, v := range s.Privileges {
			if v != nil {
				items[i] = v.toMap()
			}
		}
		m["privileges"] = items
	}
	return m
}

// AliCloudRdsAccountPrivilege grants a single privilege level on a set of
//
//	databases to the owning account.
type AliCloudRdsAccountPrivilegeInput struct {
	// Database names to grant access to. Each name must match a database
	//  defined in the spec's databases list.
	DatabaseNames []string `json:"database_names" jsonschema:"required,Database names to grant access to. Each name must match a database defined in the spec's databases list."`
	// Privilege level to grant on the specified databases.
	//  "ReadOnly" -- SELECT access.
	//  "ReadWrite" -- SELECT, INSERT, UPDATE, DELETE access.
	//  "DDLOnly" -- DDL operations only (CREATE, ALTER, DROP).
	//  "DMLOnly" -- DML operations only (INSERT, UPDATE, DELETE).
	//  "DBOwner" -- full database ownership (SQL Se...
	Privilege string `json:"privilege,omitempty" jsonschema:"Privilege level to grant on the specified databases. 'ReadOnly' -- SELECT access. 'ReadWrite' -- SELECT; INSERT; UPDATE; DELETE access. 'DDLOnly' -- DDL operations only (CREATE; ALTER; DROP). 'DMLOnly..."`
}

func (s *AliCloudRdsAccountPrivilegeInput) validate() error {
	if len(s.DatabaseNames) == 0 {
		return fmt.Errorf("database_names is required")
	}
	if len(s.DatabaseNames) < 1 {
		return fmt.Errorf("database_names requires at least 1 items, got %d", len(s.DatabaseNames))
	}
	return nil
}

func (s *AliCloudRdsAccountPrivilegeInput) applyDefaults() {
	if s.Privilege == "" {
		s.Privilege = "ReadOnly"
	}
}

func (s *AliCloudRdsAccountPrivilegeInput) toMap() map[string]any {
	m := make(map[string]any)
	m["database_names"] = s.DatabaseNames
	if s.Privilege != "" {
		m["privilege"] = s.Privilege
	}
	return m
}

// AliCloudRdsDatabase defines a database to create within the RDS instance.
type AliCloudRdsDatabaseInput struct {
	// Database name. Must match the pattern [a-z][a-z0-9_-]*[a-z0-9] and
	//  be unique within the instance.
	Name string `json:"name" jsonschema:"required,Database name. Must match the pattern [a-z][a-z0-9_-]*[a-z0-9] and be unique within the instance."`
	// Character set for the database. Defaults vary by engine:
	//  MySQL: "utf8mb4", PostgreSQL: "UTF8", SQL Server: "Chinese_PRC_CI_AS",
	//  MariaDB: "utf8mb4". Set explicitly to override the engine default.
	CharacterSet string `json:"character_set,omitempty" jsonschema:"Character set for the database. Defaults vary by engine: MySQL: 'utf8mb4'; PostgreSQL: 'UTF8'; SQL Server: 'Chinese_PRC_CI_AS'; MariaDB: 'utf8mb4'. Set explicitly to override the engine default."`
	// Human-readable description of the database.
	Description string `json:"description,omitempty" jsonschema:"Human-readable description of the database."`
}

func (s *AliCloudRdsDatabaseInput) validate() error {
	if s.Name == "" {
		return fmt.Errorf("name is required")
	}
	return nil
}

func (s *AliCloudRdsDatabaseInput) applyDefaults() {
}

func (s *AliCloudRdsDatabaseInput) toMap() map[string]any {
	m := make(map[string]any)
	m["name"] = s.Name
	if s.CharacterSet != "" {
		m["character_set"] = s.CharacterSet
	}
	if s.Description != "" {
		m["description"] = s.Description
	}
	return m
}

// AliCloudRdsParameter represents a single database engine parameter override.
type AliCloudRdsParameterInput struct {
	// Parameter name (e.g., "innodb_buffer_pool_size", "max_connections",
	//  "shared_buffers").
	Name string `json:"name" jsonschema:"required,Parameter name (e.g.; 'innodb_buffer_pool_size'; 'max_connections'; 'shared_buffers')."`
	// Parameter value as a string. The database engine interprets the value
	//  according to the parameter's type.
	Value string `json:"value" jsonschema:"required,Parameter value as a string. The database engine interprets the value according to the parameter's type."`
}

func (s *AliCloudRdsParameterInput) validate() error {
	if s.Name == "" {
		return fmt.Errorf("name is required")
	}
	if s.Value == "" {
		return fmt.Errorf("value is required")
	}
	return nil
}

func (s *AliCloudRdsParameterInput) applyDefaults() {
}

func (s *AliCloudRdsParameterInput) toMap() map[string]any {
	m := make(map[string]any)
	m["name"] = s.Name
	m["value"] = s.Value
	return m
}

// ParseAliCloudRdsInstance validates and normalizes a AliCloudRdsInstance cloud_object.
func ParseAliCloudRdsInstance(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "ali-cloud.openmcf.org/v1", "AliCloudRdsInstance"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec AliCloudRdsInstanceSpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
