// Code generated by schema2go. DO NOT EDIT.
// Generated: 2026-02-27T22:24:53+05:30

package alicloud

import (
	"encoding/json"
	"fmt"

	"github.com/plantonhq/mcp-server-planton/internal/parse"
	"google.golang.org/protobuf/types/known/structpb"
)

var (
	_ = json.Marshal
	_ = fmt.Errorf
	_ = parse.ValidateHeader
	_ = (*structpb.Struct)(nil)
)

// alicloud-eip-address
type AliCloudEipAddressSpecInput struct {
	// Alibaba Cloud region where the EIP will be allocated.
	//  The EIP can only be associated with resources in the same region.
	//  Examples: "cn-hangzhou", "cn-shanghai", "us-west-1", "ap-southeast-1".
	Region string `json:"region" jsonschema:"required,Alibaba Cloud region where the EIP will be allocated. The EIP can only be associated with resources in the same region. Examples: 'cn-hangzhou'; 'cn-shanghai'; 'us-west-1'; 'ap-southeast-1'."`
	// EIP display name. 1-128 characters; must start with a letter or Chinese
	//  character; can contain digits, underscores, periods, and hyphens.
	//  Maps to the provider field `address_name`.
	AddressName string `json:"address_name,omitempty" jsonschema:"EIP display name. 1-128 characters; must start with a letter or Chinese character; can contain digits; underscores; periods; and hyphens. Maps to the provider field 'address_name'."`
	// Human-readable description of the EIP's intended use.
	//  2-256 characters; cannot start with http:// or https://.
	Description string `json:"description,omitempty" jsonschema:"Human-readable description of the EIP's intended use. 2-256 characters; cannot start with http:// or https://."`
	// Maximum outbound bandwidth in Mbps.
	//  When internet_charge_type is "PayByTraffic", this is the bandwidth ceiling
	//  (you pay per GB transferred, not per Mbps reserved).
	//  When internet_charge_type is "PayByBandwidth", this is the guaranteed
	//  bandwidth (you pay for the full allocation regardless of usage...
	Bandwidth int32 `json:"bandwidth,omitempty" jsonschema:"Maximum outbound bandwidth in Mbps. When internet_charge_type is 'PayByTraffic'; this is the bandwidth ceiling (you pay per GB transferred; not per Mbps reserved). When internet_charge_type is 'PayByB..."`
	// Metering method for the EIP.
	//
	//  "PayByTraffic" -- billed per GB of outbound traffic. Best for bursty or
	//    unpredictable workloads. The bandwidth field acts as a ceiling.
	//  "PayByBandwidth" -- billed for the reserved bandwidth regardless of usage.
	//    Best for steady, high-throughput workloads.
	//
	//  This ...
	InternetChargeType string `json:"internet_charge_type,omitempty" jsonschema:"Metering method for the EIP. 'PayByTraffic' -- billed per GB of outbound traffic. Best for bursty or unpredictable workloads. The bandwidth field acts as a ceiling. 'PayByBandwidth' -- billed for the ..."`
	// Internet Service Provider line type for the EIP.
	//
	//  "BGP" -- multi-line BGP (default, recommended for most regions).
	//  "BGP_PRO" -- premium BGP with optimized routing for China mainland.
	//  "ChinaTelecom", "ChinaUnicom", "ChinaMobile" -- single-carrier lines.
	//  "ChinaTelecom_L2", "ChinaUnicom_L2", "China...
	Isp string `json:"isp,omitempty" jsonschema:"Internet Service Provider line type for the EIP. 'BGP' -- multi-line BGP (default; recommended for most regions). 'BGP_PRO' -- premium BGP with optimized routing for China mainland. 'ChinaTelecom'; 'C..."`
	// Alibaba Cloud resource group ID for organizational grouping (per DD05).
	//  If omitted, the EIP is placed in the account's default resource group.
	ResourceGroupId string `json:"resource_group_id,omitempty" jsonschema:"Alibaba Cloud resource group ID for organizational grouping (per DD05). If omitted; the EIP is placed in the account's default resource group."`
	// Tags to apply to the EIP.
	Tags map[string]string `json:"tags,omitempty" jsonschema:"Tags to apply to the EIP."`
}

func (s *AliCloudEipAddressSpecInput) validate() error {
	if s.Region == "" {
		return fmt.Errorf("region is required")
	}
	return nil
}

func (s *AliCloudEipAddressSpecInput) applyDefaults() {
	if s.Bandwidth == 0 {
		s.Bandwidth = 5
	}
	if s.InternetChargeType == "" {
		s.InternetChargeType = "PayByTraffic"
	}
	if s.Isp == "" {
		s.Isp = "BGP"
	}
}

func (s *AliCloudEipAddressSpecInput) toMap() map[string]any {
	m := make(map[string]any)
	m["region"] = s.Region
	if s.AddressName != "" {
		m["address_name"] = s.AddressName
	}
	if s.Description != "" {
		m["description"] = s.Description
	}
	if s.Bandwidth != 0 {
		m["bandwidth"] = s.Bandwidth
	}
	if s.InternetChargeType != "" {
		m["internet_charge_type"] = s.InternetChargeType
	}
	if s.Isp != "" {
		m["isp"] = s.Isp
	}
	if s.ResourceGroupId != "" {
		m["resource_group_id"] = s.ResourceGroupId
	}
	if len(s.Tags) > 0 {
		m["tags"] = s.Tags
	}
	return m
}

// ParseAliCloudEipAddress validates and normalizes a AliCloudEipAddress cloud_object.
func ParseAliCloudEipAddress(cloudObject map[string]any) (*structpb.Struct, error) {
	if err := parse.ValidateHeader(cloudObject, "ali-cloud.openmcf.org/v1", "AliCloudEipAddress"); err != nil {
		return nil, err
	}

	specMap, err := parse.ExtractSpecMap(cloudObject)
	if err != nil {
		return nil, err
	}

	specBytes, err := json.Marshal(specMap)
	if err != nil {
		return nil, fmt.Errorf("marshal spec: %w", err)
	}

	var spec AliCloudEipAddressSpecInput
	if err := json.Unmarshal(specBytes, &spec); err != nil {
		return nil, fmt.Errorf("invalid spec: %w", err)
	}

	if err := spec.validate(); err != nil {
		return nil, err
	}

	spec.applyDefaults()

	return parse.RebuildCloudObject(cloudObject, spec.toMap())
}
